<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="gSMaswRY9iRfG4QaQrx6aj481bgr503qEZh-QPsMYNU" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <meta name="description" content="元経済学徒, 現在どっかでデータサイエンティストもどきやってる人間の勉強日記">
    <meta name="keywords"  content="Statistics, Economics, Econometrics, Python, C, Shell, Linux, Data scientist">
    <meta name="theme-color" content="#000000">
    
    <!-- Open Graph -->
    <meta property="og:title" content="SSH(Secure Shell)の基礎知識 - Ryo's Tech Blog">
    
    <meta property="og:type" content="article">
    <meta property="og:description" content="


">
    
    <meta property="article:published_time" content="2021-05-06T00:00:00Z">
    
    
    <meta property="article:author" content="Ryo">
    
    
    <meta property="article:tag" content="Linux">
    
    <meta property="article:tag" content="ssh">
    
    
    <meta property="og:image" content="https://ryonakagami.github.io/img/avatar_rio_cat.jpg">
    <meta property="og:url" content="https://ryonakagami.github.io/2021/05/06/ssh-basics/">
    <meta property="og:site_name" content="Ryo's Tech Blog">
    
    <title>SSH(Secure Shell)の基礎知識 - Ryo's Tech Blog</title>

    <!-- Web App Manifest -->
    <link rel="manifest" href="/pwa/manifest.json">

    <!-- Favicon -->
    <link rel="shortcut icon" href="/img/favicon.ico">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://ryonakagami.github.io/2021/05/06/ssh-basics/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/ryo-blog.min.css">

    <!-- Custom Fonts -->
    <!-- <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"> -->
    <!-- https://stackoverflow.com/questions/45983301/google-pagespeed-eliminate-render-blocking-resources-above-the-fold-caused-fro -->
    <!--link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"-->
    <!--<link href="https://fonts.googleapis.com/earlyaccess/notosansjapanese.css" rel="stylesheet" type="text/css" media="print" onload="this.media='all'" > -->
    <link href="https://fonts.googleapis.com/earlyaccess/notosansjapanese.css" rel="preload" type="text/css" media="print" onload="this.media='all'" >


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- ga & ba script hoook -->
    <script></script>
</head>


<!-- hack iOS CSS :active style -->
<body ontouchstart="">

    <!-- // トグル関数 -->
<script>
  function toggleJekyllDropdown() {
    const menu = document.getElementById("jekyll-dropdown-menu");
    menu.style.display = menu.style.display === "block" ? "none" : "block";
  }

  // 外部クリックで閉じる
  window.addEventListener("click", function (e) {
    if (!e.target.matches('.dropdown-btn')) {
      const dropdown = document.getElementById("jekyll-dropdown-menu");
      if (dropdown && dropdown.style.display === "block") {
        dropdown.style.display = "none";
      }
    }
  });
</script>


<!-- Navigation -->

<nav class="navbar navbar-default navbar-custom navbar-fixed-top invert">
  
    <div class="container-fluid">
      <!-- Brand and toggle get grouped for better mobile display -->
      <div class="navbar-header page-scroll">
        <button type="button" class="navbar-toggle">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="/">Ryo's Tech Blog</a>
      </div>

      <!-- Collect the nav links, forms, and other content for toggling -->
      <div id="huxblog_navbar">
        <div class="navbar-collapse">
          <ul class="nav navbar-nav navbar-left">
            <li>
              <a href="https://ryonakagami.github.io/regmonkey-datascience-blog/">New Ryo’s Tech Blog</a>
            </li>
            <li>
              <a href="https://ryonakagami.github.io/statistics-for-regression-monkey/">Statistics for
                Regression Monkeys</a>
            </li>
            <li>
              <a href="https://ohgoshgit.github.io/">OhGoshGit!?!</a>
            </li>
            <!-- <li>
              <div class="jekyll-dropdown">
                <button class="dropdown-btn" style="border-color: rgba(70, 83, 111, 0.989); background-color: rgba(70, 83, 111, 0.989); color: white;" onclick="toggleJekyllDropdown()">Blog ▼</button>
                <div id="jekyll-dropdown-menu" class="dropdown-items">
                  <a href="#">記事一覧</a>
                  <a href="#">タグ</a>
                  <a href="#">プロフィール</a>
                  <a href="#">お問い合わせ</a>
                </div>
              </div>
            </li> -->
          </ul>
          </ul>
          <ul class="nav navbar-nav navbar-right">
            
            
            
            
            <li>
              <a href="/about/">About</a>
            </li>
            
            
            
            <li>
              <a href="/archive/">Tag Search</a>
            </li>
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            <!--about fa-search see https://stackoverflow.com/questions/41950677/how-to-make-my-search-icon-fixed-->
            <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />
            <li class="search-icon">
              <a href="javascript:void(0)" aria-label="Search" target="_blank">
                <i class="fa fa-search"></i>
              </a>
            </li>
          </ul>
        </div>
      </div>
      <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
  </nav>

  <script>
    // Drop Bootstarp low-performance Navbar
    // Use customize navbar with high-quality material design animation
    // in high-perf jank-free CSS3 implementation
    var $body = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    var __HuxNav__ = {
      close: function () {
        $navbar.className = " ";
        // wait until animation end.
        setTimeout(function () {
          // prevent frequently toggle
          if ($navbar.className.indexOf('in') < 0) {
            $collapse.style.height = "0px"
          }
        }, 400)
      },
      open: function () {
        $collapse.style.height = "auto"
        $navbar.className += " in";
      }
    }

    // Bind Event
    $toggle.addEventListener('click', function (e) {
      if ($navbar.className.indexOf('in') > 0) {
        __HuxNav__.close()
      } else {
        __HuxNav__.open()
      }
    })

    /**
     * Since Fastclick is used to delegate 'touchstart' globally
     * to hack 300ms delay in iOS by performing a fake 'click',
     * Using 'e.stopPropagation' to stop 'touchstart' event from 
     * $toggle/$collapse will break global delegation.
     * 
     * Instead, we use a 'e.target' filter to prevent handler
     * added to document close HuxNav.  
     *
     * Also, we use 'click' instead of 'touchstart' as compromise
     */
    document.addEventListener('click', function (e) {
      if (e.target == $toggle) return;
      if (e.target.className == 'icon-bar') return;
      __HuxNav__.close();
    })
  </script>

    <!-- Search -->
<div class="search-page">
  <div class="search-icon-close-container">
    <span class="search-icon-close">
      <i class="fa fa-chevron-down"></i>
    </span>
  </div>
  <div class="search-main container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <form></form>
        <input type="text" id="search-input" placeholder="$ grep...">
        </form>
        <div id="search-results" class="mini-post-list"></div>
      </div>
    </div>
  </div>
</div>


    <!-- Image to hack wechat -->
<!-- <img src="/img/icon_wechat.png" width="0" height="0"> -->
<!-- <img src="/img/home-bg.jpg" width="0" height="0"> -->

<!-- Post Header -->



<style type="text/css">
    header.intro-header{
        position: relative;
        background-image: url('/img/home-bg.jpg');
        background: ;
    }

    
    header.intro-header .header-mask{
        width: 100%;
        height: 100%;
        position: absolute;
        background: rgba(0,0,0, 0.0);
    }
    
</style>




<header class="intro-header style-text" >

    <div class="header-mask"></div>
    
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <div class="tags">
                        
                        <a class="tag" href="/archive/?tag=Linux" title="Linux">Linux</a>
                        
                        <a class="tag" href="/archive/?tag=ssh" title="ssh">ssh</a>
                        
                    </div>
                    <h1>SSH(Secure Shell)の基礎知識</h1>
                    
                    <h2 class="subheading">ssh series 2/N</h2>
                    <p>
                        公開日: 2021-05-06
                        <br>
                        更新日: 2024-04-16
                        
                    </p>
                </div>
            </div>
        </div>
    </div>
</header>







<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

    <!-- Post Container -->
         <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container">

                <!-- Multi-Lingual -->
                

				<div style="border-radius: 1em; border-style:solid; border-color:#D3D3D3; background-color:#F8F8F8">

  <p class="h4">  Table of Contents</p>

  <!-- START doctoc generated TOC please keep comment here to allow auto update -->
  <!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->

  <ul>
    <li><a href="#ssh%E3%81%AE%E4%BB%95%E7%B5%84%E3%81%BF">SSHの仕組み</a>
      <ul>
        <li><a href="#%E3%83%9B%E3%82%B9%E3%83%88%E8%AA%8D%E8%A8%BC">ホスト認証</a></li>
        <li><a href="#%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E8%AA%8D%E8%A8%BC">ユーザー認証</a>
          <ul>
            <li><a href="#%E5%85%AC%E9%96%8B%E9%8D%B5%E3%81%AE%E7%BD%AE%E3%81%8D%E5%A0%B4%E6%89%80">公開鍵の置き場所</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#%E3%82%AF%E3%83%A9%E3%82%A4%E3%82%A2%E3%83%B3%E3%83%88%E7%9B%AE%E7%B7%9A%E3%81%8B%E3%82%89%E3%81%AEssh%E6%8E%A5%E7%B6%9A">クライアント目線からのssh接続</a>
      <ul>
        <li><a href="#ssh-keygen%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89%E3%81%AB%E3%82%88%E3%82%8B%E8%AA%8D%E8%A8%BC%E9%8D%B5%E7%94%9F%E6%88%90">ssh-keygenコマンドによる認証鍵生成</a>
          <ul>
            <li><a href="#%E9%8D%B5%E3%81%AE%E7%94%9F%E6%88%90">鍵の生成</a></li>
            <li><a href="#%E6%8E%A5%E7%B6%9A%E5%85%88%E3%83%9B%E3%82%B9%E3%83%88%E3%81%B8%E3%81%AE%E5%85%AC%E9%96%8B%E9%8D%B5%E7%99%BB%E9%8C%B2">接続先ホストへの公開鍵登録</a></li>
          </ul>
        </li>
        <li><a href="#%E6%8E%A5%E7%B6%9A%E5%85%88%E6%83%85%E5%A0%B1%E3%81%AE%E8%A8%AD%E5%AE%9A%E3%83%95%E3%82%A1%E3%82%A4%E3%83%ABsshconfig">接続先情報の設定ファイル<code class="language-plaintext highlighter-rouge">~/.ssh/config</code></a></li>
        <li><a href="#sshpass%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89">sshpassコマンド</a></li>
      </ul>
    </li>
    <li><a href="#%E6%8E%A5%E7%B6%9A%E5%85%88%E3%83%9B%E3%82%B9%E3%83%88%E3%81%A8%E3%82%AF%E3%83%A9%E3%82%A4%E3%82%A2%E3%83%B3%E3%83%88%E9%96%93%E3%81%AE%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E8%BB%A2%E9%80%81-scp-%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89">接続先ホストとクライアント間のファイル転送: scp コマンド</a>
      <ul>
        <li><a href="#%E3%83%AD%E3%83%BC%E3%82%AB%E3%83%AB%E3%81%8B%E3%82%89%E3%83%AA%E3%83%A2%E3%83%BC%E3%83%88%E3%83%9B%E3%82%B9%E3%83%88%E3%81%AB%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%83%87%E3%82%A3%E3%83%AC%E3%82%AF%E3%83%88%E3%83%AA%E3%82%92%E3%82%B3%E3%83%94%E3%83%BC">ローカルからリモートホストにファイル/ディレクトリをコピー</a></li>
        <li><a href="#%E3%83%AA%E3%83%A2%E3%83%BC%E3%83%88%E3%83%9B%E3%82%B9%E3%83%88%E3%81%8B%E3%82%89%E3%83%AD%E3%83%BC%E3%82%AB%E3%83%AB%E3%81%AB%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%83%87%E3%82%A3%E3%83%AC%E3%82%AF%E3%83%88%E3%83%AA%E3%82%92%E3%82%B3%E3%83%94%E3%83%BC">リモートホストからローカルにファイル/ディレクトリをコピー</a></li>
        <li><a href="#%E3%83%AA%E3%83%A2%E3%83%BC%E3%83%88%E3%83%9B%E3%82%B9%E3%83%88%E3%81%8B%E3%82%89%E5%88%A5%E3%81%AE%E3%83%AA%E3%83%A2%E3%83%BC%E3%83%88%E3%83%9B%E3%82%B9%E3%83%88%E3%81%AB%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%83%87%E3%82%A3%E3%83%AC%E3%82%AF%E3%83%88%E3%83%AA%E3%82%92%E3%82%B3%E3%83%94%E3%83%BC">リモートホストから別のリモートホストにファイル/ディレクトリをコピー</a></li>
      </ul>
    </li>
    <li><a href="#references">References</a></li>
  </ul>

  <!-- END doctoc generated TOC please keep comment here to allow auto update -->

</div>

<h2 id="sshの仕組み">SSHの仕組み</h2>

<p>SSH(Secure SHell)は, ネットワークで接続された他コンピューターを遠隔操作するためのプロトコルです.
強力な認証機能と暗号化により, ファイル転送やリモート操作を安全に行うことができます.</p>

<p>またSSHでは, ユーザーログイン時のユーザー認証に先立って, クライアントがサーバーの正当性を確認する
ホスト認証が行われます. 接続先サーバーが偽サーバーでないか毎回接続時に確認するので, 偽サーバーに接続することで発生する
情報漏えいを防ぐことができるというメリットがSSHにはあります.</p>

<p>SSHプロトコルには現在, SSH1とSSH2という２つのプロトコルがあります.
それぞれのプロトコルには互換性はありません. 一般的には, SSH1プロトコルには脆弱性が発見されているのでSSH2を用います.
Ubuntu Serverでは, デフォルトでSSH2のみが有効となっています.</p>

<p>なおクライアント側から <code class="language-plaintext highlighter-rouge">ssh</code> コマンドを用いてSSH接続を試みる場合は, 接続先のコンピュータでsshd（SSH daemon：SSHのサーバプログラム）が
動作している必要があります. また, インターネット経由で接続する場合にはルーターなどで外部から接続できるように設定しておく必要もあります.</p>

<h3 id="ホスト認証">ホスト認証</h3>

<div style="padding-left: 2em; padding-right: 2em; border-radius: 1em; border-style:solid; border-color:#D3D3D3; background-color:#F8F8F8">
  <p class="h4"><ins>Def: ホスト認証</ins></p>

  <ul>
    <li>接続先が正当な相手であるのかどうかの認証のこと</li>
  </ul>

  <p><code class="language-plaintext highlighter-rouge">ssh</code>コマンドで初めてサーバーに接続するとき, サーバーから送られてきた公開鍵のフィンガープリントの値が表示される. このフィンガープリントをクライアント側で受け入れると, <code class="language-plaintext highlighter-rouge">~/.ssh/known_hosts</code>に以下の情報が登録される</p>

  <ul>
    <li>接続先サーバーのホスト名</li>
    <li>接続先サーバーのIPアドレス</li>
    <li>接続先サーバーの公開鍵</li>
  </ul>

</div>

<p><br /></p>

<div style="display: inline-block; background: #D3D3D3;; border: 1px solid #D3D3D3; padding: 3px 10px;color:black">
  <p><span>SSH接続の認証手順</span></p>
</div>

<div style="border: 1px solid #D3D3D3; font-size: 100%; padding: 20px;">

  <p>SSH接続を試みる際の認証は「<strong>ホスト認証, ユーザー認証</strong>」の２段階に分かれます.</p>

  <p><strong>ホスト認証</strong></p>

  <pre><code class="language-mermaid">sequenceDiagram
    participant A as ssh(client)
    participant B as sshd(server)
    A-&gt;&gt;B: ssh接続要求
    B-&gt;&gt;A: ホスト認証鍵をクライアントへ渡す
    A-&gt;&gt;B: ホスト認証鍵で暗号化した乱数をサーバーへ渡す
    B-&gt;&gt;A: ホスト認証鍵の秘密鍵で復号化し, そのハッシュ値を送付
    Note over A,B: ハッシュ値を比較し一致していれば接続成功&lt;br&gt;=ホスト認証完了
</code></pre>

  <p><strong>秘密鍵公開鍵によるユーザー認証</strong></p>

  <p>ユーザー認証はホスト認証完了後に行われる処理となります.</p>

  <pre><code class="language-mermaid">sequenceDiagram
    participant A as ssh(client)
    participant B as sshd(server)
    A--&gt;&gt;B: 公開鍵をサーバーに設置
    A-&gt;&gt;B: ssh接続要求
    B-&gt;&gt;A: 公開鍵で暗号化した乱数をssh側に渡す
    A-&gt;&gt;B: 秘密鍵で復号化し, そのハッシュ値を送付
    Note over A,B: ハッシュ値を比較し一致していれば接続成功&lt;br&gt;=ユーザー認証完了
</code></pre>

</div>

<p>初回接続時の際は, 接続先サーバーのホスト認証鍵を持っていないので,接続先ホストが登録されていない旨のWarningが表示されます.
このとき, 接続をこのまま続けるか？と聞かれます. yesと選択すると, SSH接続先サーバーが<code class="language-plaintext highlighter-rouge">~/.ssh/known_hosts</code>に登録されます.</p>

<div class="language-zsh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre>% ssh hogehoge@123.456.78.9
The authenticity of host <span class="s1">'123.456.78.9 (123.456.78.9)'</span> can not be established.
ECDSA key fingerprint is SHA256:ghzvH/1TBjI0wvlYiRNDJvUsiYAX/R9eip5bw6+Rv10.
Are you sure you want to <span class="k">continue </span>connecting <span class="o">(</span><span class="nb">yes</span>/no/[fingerprint]<span class="o">)</span>?
<span class="nv">$ </span><span class="nb">yes
</span>Warning: Permanently added <span class="s1">'123.456.78.9'</span> <span class="o">(</span>ECDSA<span class="o">)</span> to the list of known hosts.
Password:
Last login: Thu Apr 11 04:16:45 2021
</pre></td></tr></tbody></table></code></pre></div></div>

<p>上記における<code class="language-plaintext highlighter-rouge">ECDSA key fingerprintSHA256:ghzvH/1TBjI0wvlYiRNDJvUsiYAX/R9eip5bw6+Rv10</code>, の意味はSHA256で公開鍵をハッシュ化すると
<code class="language-plaintext highlighter-rouge">ghzvH/1TBjI0wvlYiRNDJvUsiYAX/R9eip5bw6+Rv10</code>というフィンガープリントが発行されることを指しています.</p>

<p>一度接続するとクライアントの <code class="language-plaintext highlighter-rouge">known_hosts</code> というファイルにサーバーの公開鍵が保存されるので, 初回接続以降は自動的に認証が行われるため警告が表示されなくなります. 目的外のサーバーに接続している場合やサーバーの公開鍵が変わっている場合, 警告が表示されます.一般的にはホストキーの変更は滅多に行わなれないため、許可済みのサーバーに接続した際、 <strong>WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!</strong> のような警告が出た場合は注意する必要があります.</p>

<blockquote>
  <p>例: WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!</p>
</blockquote>

<div class="language-zsh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre></td><td class="rouge-code"><pre>% ssh ubuntu@12.3.4.56
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@    WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!     @
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@


@@
IT IS POSSIBLE THAT SOMEONE IS DOING SOMETHING NASTY!
Someone could be eavesdropping on you right now <span class="o">(</span>man-in-the-middle attack<span class="o">)!</span>
It is also possible that a host key has just been changed.
The fingerprint <span class="k">for </span>the ECDSA key sent by the remote host is
SHA256:tfZBzQ16o7O7SH6u4ixBmL061Sxz8DOo1cFZ9oMuGjE.
Please contact your system administrator.
Add correct host key <span class="k">in</span> /home/hogehoge/.ssh/known_hosts to get rid of this message.
Offending ECDSA key <span class="k">in</span> /home/hogehoge/.ssh/known_hosts:4
  remove with:
  ssh-keygen <span class="nt">-f</span> <span class="s2">"/home/hogehoge/.ssh/known_hosts"</span> <span class="nt">-R</span> <span class="s2">"12.3.4.56"</span>
ECDSA host key <span class="k">for </span>12.3.4.56 has changed and you have requested strict checking.
Host key verification failed.
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="ユーザー認証">ユーザー認証</h3>

<p>ホスト認証後に実施されるユーザー認証は, デフォルトでは, 公開鍵認証, パスワード認証の順に実施されます.
<strong>公開鍵認証を行うには予めクライアントの公開鍵を接続先サーバーに登録する必要があります</strong>.</p>

<p>なおサーバー側でsshdの設定で</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>PubkeyAuthentication No
</pre></td></tr></tbody></table></code></pre></div></div>

<p>としていた場合は公開鍵認証なしでホスト認証後アクセスすることができます.
ただし, パスワード認証ではブルートフォース攻撃を受けることもあるので一般的には公開鍵認証をオンにします.</p>

<h4 id="公開鍵の置き場所">公開鍵の置き場所</h4>

<p>公開鍵によるユーザー認証を行うにはクライアントが作成した秘密鍵/公開鍵キーペアのうち, 後者をサーバー側にコピーする必要があります. 一般的には</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">~/.ssh/authorized_keys</code>ファイルに登録する</li>
  <li><code class="language-plaintext highlighter-rouge">~/.ssh/authorized_keys</code>以外のファイルに保存したい場合は, サーバー側の設定ファイル<code class="language-plaintext highlighter-rouge">sshd_config</code>で明示的に参照ファイルを指定する</li>
</ul>

<div style="display: inline-block; background: #D3D3D3;; border: 1px solid #D3D3D3; padding: 3px 5px;color:black">
  <p><span>sshd_config設定例</span></p>
</div>

<div style="border: 1px solid #D3D3D3; font-size: 100%; padding: 5px;">

  <p>デフォルトでは以下のような設定になっています</p>

  <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>AuthorizedKeysFile    .ssh/authorized_keys
</pre></td></tr></tbody></table></code></pre></div>  </div>

</div>

<h2 id="クライアント目線からのssh接続">クライアント目線からのssh接続</h2>

<p>SSHを使ってサーバーに接続するには, 以下のように<code class="language-plaintext highlighter-rouge">ssh</code>コマンドを使います. 
終了する場合は, <code class="language-plaintext highlighter-rouge">exit</code>, または <code class="language-plaintext highlighter-rouge">Ctrl</code> + <code class="language-plaintext highlighter-rouge">D</code>を入力します.</p>

<div class="language-zsh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>% ssh <span class="o">[</span>option] &lt;username&gt;@&lt;<span class="nb">hostname</span><span class="o">&gt;</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<table>
  <thead>
    <tr>
      <th>Option</th>
      <th>説明</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">-p ポート番号</code></td>
      <td>接続に使用するポート番号を指定する</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">-l ユーザー名</code></td>
      <td>接続に使用するユーザー名を指定する</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">-i IDファイル</code></td>
      <td>接続に使用する公開鍵ファイルを指定する</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">-f</code></td>
      <td>コマンドを実行する際にsshをバックグラウンドにする（Xアプリケーションを実行する際に使用）</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">-F 設定ファイル</code></td>
      <td>設定ファイルを指定する</td>
    </tr>
  </tbody>
</table>

<h3 id="ssh-keygenコマンドによる認証鍵生成">ssh-keygenコマンドによる認証鍵生成</h3>

<p>公開鍵認証を利用するためにはまず, <code class="language-plaintext highlighter-rouge">ssh-keygen</code>コマンドで公開鍵と秘密鍵の鍵ペアを作成する必要があります.</p>

<p><strong>Syntax &amp; Options</strong></p>

<div class="language-zsh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>% ssh-keygen <span class="o">[</span>option]
</pre></td></tr></tbody></table></code></pre></div></div>

<table>
  <thead>
    <tr>
      <th>Option</th>
      <th>説明</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">-t タイプ</code></td>
      <td>暗号化タイプの指定</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">-l</code></td>
      <td>鍵のフィンガープリントを表示する</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">-f ファイル名</code></td>
      <td>鍵ファイルを指定する（生成または読み出すファイルを指定）</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">-R ホスト名</code></td>
      <td>指定したホスト情報をknwon_hostsファイルから削除する</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">-C コメント</code></td>
      <td>コメントを指定する（デフォルトは「ユーザー名@ホスト名」。「-C ““」でコメントを削除）</td>
    </tr>
  </tbody>
</table>

<p><strong>暗号化アルゴリズムの種類</strong></p>

<table>
  <thead>
    <tr>
      <th>SSH version</th>
      <th>ssh-keygenコマンド</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>SSH1 RSA</td>
      <td><code class="language-plaintext highlighter-rouge">ssh-keygen -t rsa1</code></td>
    </tr>
    <tr>
      <td>SSH2 DSA</td>
      <td><code class="language-plaintext highlighter-rouge">ssh-keygen -t dsa</code></td>
    </tr>
    <tr>
      <td>SSH2 RSA</td>
      <td><code class="language-plaintext highlighter-rouge">ssh-keygen -t rsa</code></td>
    </tr>
    <tr>
      <td>SSH2 ECDSA</td>
      <td><code class="language-plaintext highlighter-rouge">ssh-keygen -t ecdsa</code></td>
    </tr>
    <tr>
      <td>SSH2 ED25519</td>
      <td><code class="language-plaintext highlighter-rouge">ssh-keygen -t ed25519</code></td>
    </tr>
  </tbody>
</table>

<div style="display: inline-block; background: #D3D3D3;; border: 1px solid #D3D3D3; padding: 3px 5px;color:black">
  <p><span>ED25519のススメ</span></p>
</div>

<div style="border: 1px solid #D3D3D3; font-size: 100%; padding: 5px;">

  <p><a href="https://docs.github.com/en/authentication/connecting-to-github-with-ssh/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent">GitHub</a>や<a href="https://docs.gitlab.com/ee/user/ssh.html">GitLab</a>のドキュメントを確認すると, <code class="language-plaintext highlighter-rouge">ED25519</code>の使用が推奨されています.</p>

  <p>GitLabより引用すると</p>

  <blockquote>
    <p>The book Practical Cryptography With Go suggests that ED25519 keys are more secure and performant than RSA keys. OpenSSH 6.5 introduced ED25519 SSH keys in 2014, and they should be available on most operating systems.</p>
  </blockquote>

  <p>ED25519は以下のような特徴があります</p>

  <ul>
    <li>楕円曲線を用いた暗号</li>
    <li>RSAやDSAの鍵長の約半分以下で同等のセキュリティ強度が得られる</li>
    <li>鍵長が短いので, 暗号化/復号化の計算を高速に行える</li>
  </ul>

  <p>従って, 以下のコマンドで鍵を生成するようにしてください.</p>

  <div class="language-zsh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>% ssh-keygen <span class="nt">-t</span> ed25519 <span class="nt">-C</span> <span class="s2">"&lt;comment&gt;"</span>
</pre></td></tr></tbody></table></code></pre></div>  </div>

</div>

<h4 id="鍵の生成">鍵の生成</h4>

<p><code class="language-plaintext highlighter-rouge">ssh-keygen</code>コマンドを使うと</p>

<ol>
  <li>鍵ファイル名の指定（そのまま<code class="language-plaintext highlighter-rouge">Enter</code>を入力するとデフォルトのファイル名となる）</li>
  <li>パスフレーズの入力（特別な理由がない限り設定する）</li>
</ol>

<p>が求められます. 特段の事情がない限り個人的には設定する方針としています.
なお生成される公開鍵には, デフォルトではユーザ名とホスト名がコメントとして記載されています(以下の例では<code class="language-plaintext highlighter-rouge">hoge@foofoo</code>)</p>

<div class="language-zsh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre></td><td class="rouge-code"><pre>% ssh-keygen <span class="nt">-t</span> ed25519                                           
Generating public/private ed25519 key pair.
Enter file <span class="k">in </span>which to save the key <span class="o">(</span>/home/hogehoge/.ssh/id_ed25519<span class="o">)</span>: hogehoge_ed25519
Enter passphrase <span class="o">(</span>empty <span class="k">for </span>no passphrase<span class="o">)</span>: 
Enter same passphrase again: 
Your identification has been saved <span class="k">in </span>hogehoge_ed25519
Your public key has been saved <span class="k">in </span>hogehoge_ed25519.pub
The key fingerprint is:
SHA256:MnM1r0IqwugnLCTEnSHjuPoTk7mdmSMExw+r5cOkrwQ hoge@foofoo
The key<span class="s1">'s randomart image is:
+--[ED25519 256]--+
|@+%.  o  o       |
|.o.Eo *  + S     |
|. o..oo +        |
|@+%.  o  o       |
| .oo=.= S =      |
|   ..B o + +     |
|    = * . o .    |
| o++o            |
|+B==.. ....      |
+----[SHA256]-----+
</span></pre></td></tr></tbody></table></code></pre></div></div>

<p>秘密鍵の作成後, 誤って内容が書き換わってしまうリスクを抑えるため, Permissionを<code class="language-plaintext highlighter-rouge">400</code>に設定しときます:</p>

<div class="language-zsh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>% <span class="nb">sudo chmod </span>400 id_ed25519
</pre></td></tr></tbody></table></code></pre></div></div>

<h4 id="接続先ホストへの公開鍵登録">接続先ホストへの公開鍵登録</h4>

<p>鍵ペア作成後, 公開鍵を接続先ホストへ登録する必要あります. この時使われるコマンドが <code class="language-plaintext highlighter-rouge">ssh-copy-id</code>コマンドです.
なお, <strong>初回登録時点では接続先ホストではパスワード認証によるログインが許可されている必要があります</strong>.</p>

<div style="display: inline-block; background: #D3D3D3;; border: 1px solid #D3D3D3; padding: 3px 5px;color:black">
  <p><span>ssh-copy-idコマンド</span></p>
</div>

<div style="border: 1px solid #D3D3D3; font-size: 100%; padding: 5px;">

  <p>以下のコマンドで接続先サーバーの<code class="language-plaintext highlighter-rouge">.ssh/authorized_keys</code>に公開鍵を追記することができる</p>

  <div class="language-zsh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre>% ssh-copy-id <span class="o">[</span><span class="nt">-p</span> ポート番号] <span class="nt">-i</span> 公開鍵ファイル名 USERNAME@<span class="nv">$HOST</span>

<span class="c"># 以下のコマンドと同義</span>
<span class="c"># cat 公開鍵ファイル名 \</span>
<span class="c">#  | ssh -p ポート番号 USERNAME@$HOST \</span>
<span class="c">#  "mkdir -p ~/.ssh; cat &gt;&gt; ~/.ssh/authorized_keys"</span>
</pre></td></tr></tbody></table></code></pre></div>  </div>

  <ul>
    <li><code class="language-plaintext highlighter-rouge">.ssh/authorized_keys</code>ファイルが存在しなくても, 自動的に作成してくれます</li>
    <li>このコマンド実施時には接続先ホストのパスワード入力が求められます.</li>
    <li>登録後はOpenSSHサーバーの設定を変更し, パスワード認証を無効にすることが推奨されます.</li>
  </ul>

</div>

<h3 id="接続先情報の設定ファイルsshconfig">接続先情報の設定ファイル<code class="language-plaintext highlighter-rouge">~/.ssh/config</code></h3>

<p><code class="language-plaintext highlighter-rouge">ssh</code>コマンド実行時のオプションを<code class="language-plaintext highlighter-rouge">~/.ssh/config</code>で登録することができます.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre>Host DEDEDE
  HostName 100.21.209.82
  User kirby_MBP
  Port 1000
  IdentityFile ~/.ssh/my_id_rsa
  LocalForward 9999 localhost:9999
</pre></td></tr></tbody></table></code></pre></div></div>

<p>と設定すると以下のコマンドは同じ挙動になります</p>

<div class="language-zsh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>% ssh DEDEDE
% ssh kirby_MBP@100.21.209.82 <span class="nt">-p</span> 1000 <span class="nt">-i</span> ~/.ssh/my_id_rsa <span class="nt">-L</span> 9999:localhost:9999
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="sshpassコマンド">sshpassコマンド</h3>

<p>sshpass(noninteractive ssh password provider)とは, sshコマンドでSSH接続を試みる際に要求されるログインパスワードを
事前に指定した方法でコマンドプロンプトへ渡し, 簡単にSSH接続を実現するCLI機能のことです.</p>

<p>ただし, <code class="language-plaintext highlighter-rouge">sshpass -p &lt;password&gt; ssh &lt;usename@&gt;接続先ホスト</code> という形で実行するとシステムユーザーによる<code class="language-plaintext highlighter-rouge">ps</code>コマンドで
パスワードがバレてしまうというリスクがあるので, 便利さの一方, セキュリティリスクがある点について留意が必要です.</p>

<blockquote>
  <p>インストール方法</p>
</blockquote>

<div class="language-zsh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>% <span class="nb">sudo </span>apt <span class="nb">install </span>sshpass <span class="c">## Ubuntu</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Macだと以下のようなメッセージで怒られます.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre>#Error: No available formula or cask with the name "sshpass".
#We won't add sshpass because it makes it too easy for novice SSH users to
#ruin SSH's security.
</pre></td></tr></tbody></table></code></pre></div></div>

<p>それでもインストールしたい場合は, ソースから直接以下のような方法でインストールします:</p>

<div class="language-zsh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre>% wget http://sourceforge.net/projects/sshpass/files/latest/download <span class="nt">-O</span> sshpass.tar.gz
% <span class="nb">tar</span> <span class="nt">-xvf</span> sshpass.tar.gz
% <span class="nb">cd </span>sshpass-1.08
% ./configure
% <span class="nb">sudo </span>make <span class="nb">install</span> 
% which sshpass <span class="c">##pathが通っているか確認</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<blockquote>
  <p>How to Use sshpass command</p>
</blockquote>

<p>まずヘルプコマンドで利用方法を確認してみます:</p>

<div class="language-zsh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="rouge-code"><pre>% sshpass <span class="nt">-h</span>
Usage: sshpass <span class="o">[</span><span class="nt">-f</span>|-d|-p|-e] <span class="o">[</span><span class="nt">-hV</span><span class="o">]</span> <span class="nb">command </span>parameters
   <span class="nt">-f</span> filename   Take password to use from file
   <span class="nt">-d</span> number     Use number as file descriptor <span class="k">for </span>getting password
   <span class="nt">-p</span> password   Provide password as argument <span class="o">(</span>security unwise<span class="o">)</span>
   <span class="nt">-e</span>            Password is passed as env-var <span class="s2">"SSHPASS"</span>
   With no parameters - password will be taken from stdin

   <span class="nt">-P</span> prompt     Which string should sshpass search <span class="k">for </span>to detect a password prompt
   <span class="nt">-v</span>            Be verbose about what you<span class="s1">'re doing
   -h            Show help (this screen)
   -V            Print version information
At most one of -f, -d, -p or -e should be used
</span></pre></td></tr></tbody></table></code></pre></div></div>

<div class="language-zsh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>% sshpass <span class="nt">-p</span> <span class="s1">'&lt;passphrase&gt;'</span> ssh username@host 
</pre></td></tr></tbody></table></code></pre></div></div>

<p>という形で利用することもできますが, <code class="language-plaintext highlighter-rouge">ps</code>コマンドでpassphraseがダダ漏れになってしまうので</p>

<div class="language-zsh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>% sshpass <span class="nt">-f</span> &lt;configfilepath&gt; ssh username@host
</pre></td></tr></tbody></table></code></pre></div></div>

<p>または, <code class="language-plaintext highlighter-rouge">-e</code>オプションを指定することで環境変数<code class="language-plaintext highlighter-rouge">SSHPASS</code>を参照することができるので</p>

<div class="language-zsh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre>% <span class="nb">export </span><span class="nv">SSHPASS</span><span class="o">=</span><span class="s1">'my_pass_here'</span>
% <span class="nb">echo</span> <span class="nv">$SSHPASS</span>
% sshpass <span class="nt">-e</span> ssh username@host 
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="接続先ホストとクライアント間のファイル転送-scp-コマンド">接続先ホストとクライアント間のファイル転送: scp コマンド</h2>

<div style="display: inline-block; background: #D3D3D3;; border: 1px solid #D3D3D3; padding: 3px 5px;color:black">
  <p><span>scpコマンド</span></p>
</div>

<div style="border: 1px solid #D3D3D3; font-size: 100%; padding: 5px;">

  <div class="language-zsh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>% scp <span class="o">[</span>オプション] コピー元 コピー先 
</pre></td></tr></tbody></table></code></pre></div>  </div>

  <p>コピー元,コピー先はそれぞれのPATHを入力しますがリモート側/ローカル側の書式例は以下です:</p>

  <ul>
    <li>
      <table>
        <tbody>
          <tr>
            <td>リモートサーバー側: <code class="language-plaintext highlighter-rouge">username@hostname：PATH</code></td>
          </tr>
        </tbody>
      </table>
    </li>
    <li>ローカルクライアント側:<code class="language-plaintext highlighter-rouge">PATH</code></li>
  </ul>

  <table>
    <thead>
      <tr>
        <th>Option</th>
        <th>説明</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><code class="language-plaintext highlighter-rouge">-i 秘密鍵ファイル</code></td>
        <td>RSAまたはDSA認証の秘密鍵ファイルを指定する</td>
      </tr>
      <tr>
        <td><code class="language-plaintext highlighter-rouge">-P ポート番号</code></td>
        <td>ポート番号を指定する</td>
      </tr>
      <tr>
        <td><code class="language-plaintext highlighter-rouge">-p</code></td>
        <td>コピー元ファイルとディレクトリの更新時間、アクセス時間、パーミッションを保持したまま転送する場合</td>
      </tr>
      <tr>
        <td><code class="language-plaintext highlighter-rouge">-r</code></td>
        <td>ディレクトリ内を再帰的にコピーする</td>
      </tr>
    </tbody>
  </table>

</div>

<h3 id="ローカルからリモートホストにファイルディレクトリをコピー">ローカルからリモートホストにファイル/ディレクトリをコピー</h3>

<div class="language-zsh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre><span class="c">## ファイルのコピー</span>
% scp ~/tmp/file1 user@192.168.10.1:/home/user/tmp/ 

<span class="c">## ディレクトリのコピー</span>
% scp <span class="nt">-r</span> ~/tmp user1@192.168.10.1:/home/user/tmp

<span class="c">## sshpassとの組合せ</span>
% sshpass <span class="nt">-f</span> passwordFile scp ~/tmp/file1 user@192.168.10.1:/home/user/tmp/ 
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="リモートホストからローカルにファイルディレクトリをコピー">リモートホストからローカルにファイル/ディレクトリをコピー</h3>

<div class="language-zsh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre><span class="c">## ファイルのコピー</span>
% scp user@192.168.10.1:/home/user/file1 ~/tmp
 
<span class="c">## ディレクトリのコピー</span>
% scp <span class="nt">-r</span> user@192.168.10.1:/home/user/tmp ~/tmp
 
<span class="c">## 複数のファイルを、{}で囲んで「,」で区切り指定しコピーする例</span>
% scp user@192.168.10.1:/home/user/<span class="o">{</span>file1,file2,file3<span class="o">}</span> ~/tmp
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="リモートホストから別のリモートホストにファイルディレクトリをコピー">リモートホストから別のリモートホストにファイル/ディレクトリをコピー</h3>

<div class="language-zsh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>% scp user1@192.168.10.1:/home/user/tmp/file1 user2@192.168.10.2:/home/user/tmp/
</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="references">References</h2>

<ul>
  <li><a href="https://www.tecmint.com/sshpass-non-interactive-ssh-login-shell-script-ssh-password/">sshpass: An Excellent Tool for Non-Interactive SSH Login – Never Use on Production Server</a></li>
</ul>


                <hr style="visibility: hidden;">
                <hr/>
                <b><fontsize="5">Share Buttons</font><br></b>
                <!--see 
    https://jekyllcodex.org/without-plugin/share-buttons/ 
    https://ranvir.xyz/blog/why-and-how-to-add-social-sharing-buttons-on-your-jekyll-blog-using-github-pages/
-->



<style>
#share-buttons {display: inline-block; vertical-align: middle; }
#share-buttons:after {content: ""; display: block; clear: both;}
#share-buttons > div {
    position: relative;
    text-align: left; 
    height: 36px; 
    width: 32px; 
    float: left; 
    text-align: center;
}
#share-buttons > div > svg {height: 16px; fill: #d5d5d5; margin-top: 10px;}
#share-buttons > div:hover {cursor: pointer;}
#share-buttons > div.facebook:hover > svg {fill: #3B5998;}
#share-buttons > div.twitter:hover > svg {fill: #55ACEE;}
#share-buttons > div.linkedin:hover > svg {fill: #0077b5;}
#share-buttons > div.pinterest:hover > svg {fill: #CB2027;}
#share-buttons > div.gplus:hover > svg {fill: #dd4b39;}
#share-buttons > div.mail:hover > svg {fill: #7D7D7D;}
#share-buttons > div.instagram:hover > svg {fill: #C73B92;}
#share-buttons > div.facebook > svg {height: 18px; margin-top: 9px;}
#share-buttons > div.twitter > svg {height: 20px; margin-top: 8px;}
#share-buttons > div.linkedin > svg {height: 19px; margin-top: 7px;}
#share-buttons > div.pinterest > svg {height: 20px; margin-top: 9px;}
#share-buttons > div.gplus > svg {height: 17px; margin-top: 9px; position: relative; left: 1px;}
#share-buttons > div.mail > svg {height: 14px; margin-top: 11px;}
</style>

<span style="color: black">Share on: </span><div id="share-buttons">
    <div class="facebook" title="Share this on Facebook" onclick="gtag('event', 'Facebook', {'event_category':'Post Shared','event_label':'Facebook'}); location.href='http://www.facebook.com/share.php?u=https://ryonakagami.github.io/2021/05/06/ssh-basics/';"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1343 12v264h-157q-86 0-116 36t-30 108v189h293l-39 296h-254v759h-306v-759h-255v-296h255v-218q0-186 104-288.5t277-102.5q147 0 228 12z"/></svg></div>
    <div class="twitter" title="Share this on Twitter" onclick="gtag('event', 'Twitter', {'event_category':'Post Shared','event_label':'Twitter'}); location.href='https://twitter.com/intent/tweet?text=SSH(Secure Shell)の基礎知識&url=https://ryonakagami.github.io/2021/05/06/ssh-basics/';"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1684 408q-67 98-162 167 1 14 1 42 0 130-38 259.5t-115.5 248.5-184.5 210.5-258 146-323 54.5q-271 0-496-145 35 4 78 4 225 0 401-138-105-2-188-64.5t-114-159.5q33 5 61 5 43 0 85-11-112-23-185.5-111.5t-73.5-205.5v-4q68 38 146 41-66-44-105-115t-39-154q0-88 44-163 121 149 294.5 238.5t371.5 99.5q-8-38-8-74 0-134 94.5-228.5t228.5-94.5q140 0 236 102 109-21 205-78-37 115-142 178 93-10 186-50z"/></svg></div>
    <div class="linkedin" title="Share this on Linkedin" onclick="gtag('event', 'Linkedin', {'event_category':'Post Shared','event_label':'Linkedin'}); location.href='https://www.linkedin.com/shareArticle?mini=true&url=https://ryonakagami.github.io/2021/05/06/ssh-basics/&title=&summary=&source=';"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M477 625v991h-330v-991h330zm21-306q1 73-50.5 122t-135.5 49h-2q-82 0-132-49t-50-122q0-74 51.5-122.5t134.5-48.5 133 48.5 51 122.5zm1166 729v568h-329v-530q0-105-40.5-164.5t-126.5-59.5q-63 0-105.5 34.5t-63.5 85.5q-11 30-11 81v553h-329q2-399 2-647t-1-296l-1-48h329v144h-2q20-32 41-56t56.5-52 87-43.5 114.5-15.5q171 0 275 113.5t104 332.5z"/></svg></div>
    
    <div class="mail" title="Share this through Email" onclick="gtag('event', 'Email', {'event_category':'Post Shared','event_label':'Email'}); location.href='mailto:?&body=https://ryonakagami.github.io/2021/05/06/ssh-basics/';"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1792 710v794q0 66-47 113t-113 47h-1472q-66 0-113-47t-47-113v-794q44 49 101 87 362 246 497 345 57 42 92.5 65.5t94.5 48 110 24.5h2q51 0 110-24.5t94.5-48 92.5-65.5q170-123 498-345 57-39 100-87zm0-294q0 79-49 151t-122 123q-376 261-468 325-10 7-42.5 30.5t-54 38-52 32.5-57.5 27-50 9h-2q-23 0-50-9t-57.5-27-52-32.5-54-38-42.5-30.5q-91-64-262-182.5t-205-142.5q-62-42-117-115.5t-55-136.5q0-78 41.5-130t118.5-52h1472q65 0 112.5 47t47.5 113z"/></svg></div>
</div>

                
                <hr/>

                <!-- Featured Tags -->
                <b><fontsize="5">Feature Tags</b>
                    <div id="tag_cloud" class="tags tags-sup js-tags" 
                    style="line-height: 0px !important;">
                        
                        
                        
                        
                        
                                <a data-sort="0288" 
                                    href="/archive/?tag=%E7%B5%B1%E8%A8%88"
                                    title="統計"
                                    style="color: #337ab7 !important;"
                                    rel="62">統計</a>
                        
                                <a data-sort="0299" 
                                    href="/archive/?tag=Python"
                                    title="Python"
                                    style="color: #337ab7 !important;"
                                    rel="51">Python</a>
                        
                                <a data-sort="0300" 
                                    href="/archive/?tag=math"
                                    title="math"
                                    style="color: #337ab7 !important;"
                                    rel="50">math</a>
                        
                                <a data-sort="0304" 
                                    href="/archive/?tag=Linux"
                                    title="Linux"
                                    style="color: #337ab7 !important;"
                                    rel="46">Linux</a>
                        
                                <a data-sort="0317" 
                                    href="/archive/?tag=Ubuntu+20.04+LTS"
                                    title="Ubuntu 20.04 LTS"
                                    style="color: #337ab7 !important;"
                                    rel="33">Ubuntu 20.04 LTS</a>
                        
                                <a data-sort="0320" 
                                    href="/archive/?tag=Shell"
                                    title="Shell"
                                    style="color: #337ab7 !important;"
                                    rel="30">Shell</a>
                        
                                <a data-sort="0322" 
                                    href="/archive/?tag=English"
                                    title="English"
                                    style="color: #337ab7 !important;"
                                    rel="28">English</a>
                        
                                <a data-sort="0325" 
                                    href="/archive/?tag=git"
                                    title="git"
                                    style="color: #337ab7 !important;"
                                    rel="25">git</a>
                        
                                <a data-sort="0330" 
                                    href="/archive/?tag=%E6%96%B9%E6%B3%95%E8%AB%96"
                                    title="方法論"
                                    style="color: #337ab7 !important;"
                                    rel="20">方法論</a>
                        
                                <a data-sort="0334" 
                                    href="/archive/?tag=Ubuntu+22.04+LTS"
                                    title="Ubuntu 22.04 LTS"
                                    style="color: #337ab7 !important;"
                                    rel="16">Ubuntu 22.04 LTS</a>
                        
                                <a data-sort="0338" 
                                    href="/archive/?tag=%E7%B5%B1%E8%A8%88%E6%A4%9C%E5%AE%9A"
                                    title="統計検定"
                                    style="color: #337ab7 !important;"
                                    rel="12">統計検定</a>
                        
                                <a data-sort="0339" 
                                    href="/archive/?tag=%E7%AB%B6%E6%8A%80%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0"
                                    title="競技プログラミング"
                                    style="color: #337ab7 !important;"
                                    rel="11">競技プログラミング</a>
                        
                                <a data-sort="0340" 
                                    href="/archive/?tag=%E3%83%95%E3%83%BC%E3%83%AA%E3%82%A8%E8%A7%A3%E6%9E%90"
                                    title="フーリエ解析"
                                    style="color: #337ab7 !important;"
                                    rel="10">フーリエ解析</a>
                        
                                <a data-sort="0341" 
                                    href="/archive/?tag=%E5%89%8D%E5%87%A6%E7%90%86"
                                    title="前処理"
                                    style="color: #337ab7 !important;"
                                    rel="9">前処理</a>
                        
                                <a data-sort="0341" 
                                    href="/archive/?tag=SQL"
                                    title="SQL"
                                    style="color: #337ab7 !important;"
                                    rel="9">SQL</a>
                        
                                <a data-sort="0341" 
                                    href="/archive/?tag=coding"
                                    title="coding"
                                    style="color: #337ab7 !important;"
                                    rel="9">coding</a>
                        
                                <a data-sort="0342" 
                                    href="/archive/?tag=%E3%82%B3%E3%83%9F%E3%83%A5%E3%83%8B%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3"
                                    title="コミュニケーション"
                                    style="color: #337ab7 !important;"
                                    rel="8">コミュニケーション</a>
                        
                                <a data-sort="0343" 
                                    href="/archive/?tag=Network"
                                    title="Network"
                                    style="color: #337ab7 !important;"
                                    rel="7">Network</a>
                        
                                <a data-sort="0343" 
                                    href="/archive/?tag=ssh"
                                    title="ssh"
                                    style="color: #337ab7 !important;"
                                    rel="7">ssh</a>
                        
                                <a data-sort="0344" 
                                    href="/archive/?tag=%E5%B0%86%E6%A3%8B"
                                    title="将棋"
                                    style="color: #337ab7 !important;"
                                    rel="6">将棋</a>
                        
                                <a data-sort="0344" 
                                    href="/archive/?tag=Data+visualization"
                                    title="Data visualization"
                                    style="color: #337ab7 !important;"
                                    rel="6">Data visualization</a>
                        
                                <a data-sort="0344" 
                                    href="/archive/?tag=Docker"
                                    title="Docker"
                                    style="color: #337ab7 !important;"
                                    rel="6">Docker</a>
                        
                                <a data-sort="0344" 
                                    href="/archive/?tag=Econometrics"
                                    title="Econometrics"
                                    style="color: #337ab7 !important;"
                                    rel="6">Econometrics</a>
                        
                                <a data-sort="0344" 
                                    href="/archive/?tag=VSCode"
                                    title="VSCode"
                                    style="color: #337ab7 !important;"
                                    rel="6">VSCode</a>
                        
                                <a data-sort="0344" 
                                    href="/archive/?tag=statistical+inference"
                                    title="statistical inference"
                                    style="color: #337ab7 !important;"
                                    rel="6">statistical inference</a>
                        
                                <a data-sort="0345" 
                                    href="/archive/?tag=GitHub+Pages"
                                    title="GitHub Pages"
                                    style="color: #337ab7 !important;"
                                    rel="5">GitHub Pages</a>
                        
                                <a data-sort="0345" 
                                    href="/archive/?tag=apt"
                                    title="apt"
                                    style="color: #337ab7 !important;"
                                    rel="5">apt</a>
                        
                                <a data-sort="0345" 
                                    href="/archive/?tag=development"
                                    title="development"
                                    style="color: #337ab7 !important;"
                                    rel="5">development</a>
                        
                                <a data-sort="0346" 
                                    href="/archive/?tag=%E3%82%B7%E3%82%B9%E3%83%86%E3%83%A0%E7%AE%A1%E7%90%86"
                                    title="システム管理"
                                    style="color: #337ab7 !important;"
                                    rel="4">システム管理</a>
                        
                                <a data-sort="0346" 
                                    href="/archive/?tag=Coffee"
                                    title="Coffee"
                                    style="color: #337ab7 !important;"
                                    rel="4">Coffee</a>
                        
                                <a data-sort="0346" 
                                    href="/archive/?tag=cloud"
                                    title="cloud"
                                    style="color: #337ab7 !important;"
                                    rel="4">cloud</a>
                        
                                <a data-sort="0347" 
                                    href="/archive/?tag=%E6%95%B0%E5%80%A4%E8%A8%88%E7%AE%97"
                                    title="数値計算"
                                    style="color: #337ab7 !important;"
                                    rel="3">数値計算</a>
                        
                                <a data-sort="0347" 
                                    href="/archive/?tag=%E7%B4%A0%E6%95%B0"
                                    title="素数"
                                    style="color: #337ab7 !important;"
                                    rel="3">素数</a>
                        
                                <a data-sort="0347" 
                                    href="/archive/?tag=Book"
                                    title="Book"
                                    style="color: #337ab7 !important;"
                                    rel="3">Book</a>
                        
                                <a data-sort="0347" 
                                    href="/archive/?tag=Font"
                                    title="Font"
                                    style="color: #337ab7 !important;"
                                    rel="3">Font</a>
                        
                                <a data-sort="0347" 
                                    href="/archive/?tag=Metrics"
                                    title="Metrics"
                                    style="color: #337ab7 !important;"
                                    rel="3">Metrics</a>
                        
                                <a data-sort="0347" 
                                    href="/archive/?tag=Poetry"
                                    title="Poetry"
                                    style="color: #337ab7 !important;"
                                    rel="3">Poetry</a>
                        
                                <a data-sort="0347" 
                                    href="/archive/?tag=Ubuntu+24.04+LTS"
                                    title="Ubuntu 24.04 LTS"
                                    style="color: #337ab7 !important;"
                                    rel="3">Ubuntu 24.04 LTS</a>
                        
                                <a data-sort="0347" 
                                    href="/archive/?tag=architecture"
                                    title="architecture"
                                    style="color: #337ab7 !important;"
                                    rel="3">architecture</a>
                        
                                <a data-sort="0347" 
                                    href="/archive/?tag=aws"
                                    title="aws"
                                    style="color: #337ab7 !important;"
                                    rel="3">aws</a>
                        
                                <a data-sort="0347" 
                                    href="/archive/?tag=shell"
                                    title="shell"
                                    style="color: #337ab7 !important;"
                                    rel="3">shell</a>
                        
                                <a data-sort="0347" 
                                    href="/archive/?tag=systemctl"
                                    title="systemctl"
                                    style="color: #337ab7 !important;"
                                    rel="3">systemctl</a>
                        
                                <a data-sort="0348" 
                                    href="/archive/?tag=%E3%83%86%E3%83%B3%E3%83%97%E3%83%AC%E3%83%BC%E3%83%88"
                                    title="テンプレート"
                                    style="color: #337ab7 !important;"
                                    rel="2">テンプレート</a>
                        
                                <a data-sort="0348" 
                                    href="/archive/?tag=%E3%83%87%E3%83%BC%E3%82%BF%E6%A7%8B%E9%80%A0"
                                    title="データ構造"
                                    style="color: #337ab7 !important;"
                                    rel="2">データ構造</a>
                        
                                <a data-sort="0348" 
                                    href="/archive/?tag=%E3%83%9D%E3%83%AF%E3%82%BD%E3%83%B3%E5%88%86%E5%B8%83"
                                    title="ポワソン分布"
                                    style="color: #337ab7 !important;"
                                    rel="2">ポワソン分布</a>
                        
                                <a data-sort="0348" 
                                    href="/archive/?tag=%E4%BC%9A%E8%A8%88%E5%88%86%E6%9E%90"
                                    title="会計分析"
                                    style="color: #337ab7 !important;"
                                    rel="2">会計分析</a>
                        
                                <a data-sort="0348" 
                                    href="/archive/?tag=%E6%96%87%E5%AD%97%E3%82%B3%E3%83%BC%E3%83%89"
                                    title="文字コード"
                                    style="color: #337ab7 !important;"
                                    rel="2">文字コード</a>
                        
                                <a data-sort="0348" 
                                    href="/archive/?tag=%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89"
                                    title="環境構築"
                                    style="color: #337ab7 !important;"
                                    rel="2">環境構築</a>
                        
                                <a data-sort="0348" 
                                    href="/archive/?tag=%E8%AB%96%E6%96%87"
                                    title="論文"
                                    style="color: #337ab7 !important;"
                                    rel="2">論文</a>
                        
                                <a data-sort="0348" 
                                    href="/archive/?tag=App"
                                    title="App"
                                    style="color: #337ab7 !important;"
                                    rel="2">App</a>
                        
                                <a data-sort="0348" 
                                    href="/archive/?tag=Bayesian"
                                    title="Bayesian"
                                    style="color: #337ab7 !important;"
                                    rel="2">Bayesian</a>
                        
                                <a data-sort="0348" 
                                    href="/archive/?tag=Dynamic+Programming"
                                    title="Dynamic Programming"
                                    style="color: #337ab7 !important;"
                                    rel="2">Dynamic Programming</a>
                        
                                <a data-sort="0348" 
                                    href="/archive/?tag=Keyboard"
                                    title="Keyboard"
                                    style="color: #337ab7 !important;"
                                    rel="2">Keyboard</a>
                        
                                <a data-sort="0348" 
                                    href="/archive/?tag=Processing"
                                    title="Processing"
                                    style="color: #337ab7 !important;"
                                    rel="2">Processing</a>
                        
                                <a data-sort="0348" 
                                    href="/archive/?tag=R"
                                    title="R"
                                    style="color: #337ab7 !important;"
                                    rel="2">R</a>
                        
                                <a data-sort="0348" 
                                    href="/archive/?tag=Steam"
                                    title="Steam"
                                    style="color: #337ab7 !important;"
                                    rel="2">Steam</a>
                        
                                <a data-sort="0348" 
                                    href="/archive/?tag=filesystem"
                                    title="filesystem"
                                    style="color: #337ab7 !important;"
                                    rel="2">filesystem</a>
                        
                                <a data-sort="0348" 
                                    href="/archive/?tag=quarto"
                                    title="quarto"
                                    style="color: #337ab7 !important;"
                                    rel="2">quarto</a>
                        
                                <a data-sort="0348" 
                                    href="/archive/?tag=regex"
                                    title="regex"
                                    style="color: #337ab7 !important;"
                                    rel="2">regex</a>
                    </div>

                <br>

                <b><fontsize="5">Leave a Comment</font><br>(注意：GitHub Accountが必要となります）</b>
                
                <script src="https://utteranc.es/client.js"
                    repo="RyoNakagami/RyoNakagami.github.io"
                    issue-term="url"
                    theme="github-light"
                    crossorigin="anonymous"
                    async>Reduce unused JavaScript
                
                </script>


            </div>  

    <!-- Side Catalog Container -->
        
            <div class="
                col-lg-1 col-lg-offset-0
                visible-lg-block
                sidebar-container
                catalog-container">
                <div class="side-catalog fixed" style="margin-top:3%">
                    <hr class="hidden-sm hidden-xs">
                    <h5>
                        <a class="catalog-toggle" href="#">CONTENTS</a>
                    </h5>
                    <ul class="catalog-body"></ul>
                </div>
            </div>
        
    <!-- Sidebar Container -->
            <!-- <div class="
                col-lg-10 col-lg-offset-1
                col-md-10 col-md-offset-1
                sidebar-container row"> -->
                <!-- 
<hr>
<h5>FRIENDS</h5>
<ul class="list-inline">
  
  <li><a href="https://twitter.com/bluesky0804?ref_src=twsrc%5Egoogle%7Ctwcamp%5Eserp%7Ctwgr%5Eauthor">bluesky0804</a></li>
  
</ul>

 -->
            </div>
        </div>
    </div>
</article>

<!-- add support for mathjax by voleking-->

  <script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js" id="MathJax-script"></script>
<script>
  MathJax = {
    tex: {
      inlineMath: [['$','$'], ['\\(','\\)']],
      displayMath: [['$$','$$'], ['\\[','\\]']],
      processEscapes: true,
      processEnvironments: true, // for pseudo
      tags: "ams",
      autoload: {
        color: [],
        colorV2: ['color']
      },
      packages: {'[+]': ['noerrors']}
    },
    chtml: {
      matchFontHeight: false,
      displayAlign: "left",
      displayIndent: "2em"
    },
    options: {
      renderActions: {
        /* add a new named action to render <script type="math/tex"> */
        find_script_mathtex: [10, function (doc) {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/);
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
            const text = document.createTextNode('');
            node.parentNode.replaceChild(text, node);
            math.start = {node: text, delim: '', n: 0};
            math.end = {node: text, delim: '', n: 0};
            doc.math.push(math);
          }
        }, '']
      }
    },
    loader: {
      load: ['[tex]/noerrors']
    }
  };
</script>





<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>
<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script>
    async("//cdnjs.cloudflare.com/ajax/libs/anchor-js/1.1.1/anchor.min.js",function(){
        anchors.options = {
          visible: 'hover',
          placement: 'right',
          // icon: '#'
        };
        anchors.add().remove('.intro-header h1').remove('.subheading').remove('.sidebar-container h5');
    })
</script>
<style>
    /* place left on bigger screen */
    @media all and (min-width: 800px) {
        .anchorjs-link{
            position: absolute;
            left: -0.75em;
            font-size: 1.1em;
            margin-top : -0.1em;
        }
    }
</style>


<body>
    <!-- enable mermaid language on markdown post -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/10.6.1/mermaid.min.js"></script>
<script>
   mermaid.initialize({
       startOnLoad:true,
       theme: 'default'
   });
   window.mermaid.init(undefined, document.querySelectorAll('.language-mermaid'));
</script>

</body>

    <script>
    
    var elements = document.querySelectorAll('p');
    Array.prototype.forEach.call(elements, function(el, i){
        if(el.innerHTML=='[expand]') {
            var parentcontent = el.parentNode.innerHTML.replace('<p>[expand]</p>','<div class="expand" style="display: none; height: 0; overflow: hidden;">').replace('<p>[/expand]</p>','</div>');
            el.parentNode.innerHTML = parentcontent;
        }
    });

    var elements = document.querySelectorAll('div.expand');
    Array.prototype.forEach.call(elements, function(el, i){
        el.previousElementSibling.innerHTML = el.previousElementSibling.innerHTML + '<span>..&nbsp; <a href="#" style="cursor: pointer;" onclick="this.parentNode.parentNode.nextElementSibling.style.display = \'block\'; this.parentNode.parentNode.nextElementSibling.style.height = \'auto\'; this.parentNode.style.display = \'none\';">read&nbsp;more&nbsp;&rarr;</a></span>';
    });

</script>

    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <!--<div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"> -->
                <!-- SNS Link -->
            


<ul class="list-inline text-center">


  
  
  
  
  <li>
    <a target="_blank" href="https://github.com/RyoNakagami">
      <span class="fa-stack fa-lg">
        <i class="fa fa-circle fa-stack-2x"></i>
        <i class="fa fa-github fa-stack-1x fa-inverse"></i>
      </span>
    </a>
  </li>
  
  
</ul>

            
            <p class="copyright text-muted">
                Copyright &copy; Ryo's Tech Blog 2025
                <br>
                Powered by <a href="https://ryonakagami.github.io">Ryo's Tech Blog</a> |
                <iframe style="margin-left: 2px; margin-bottom:-5px;" frameborder="0" scrolling="0" width="100px"
                    height="20px"
                    title="RyoNakagami.github.io github stars"
                    src="https://ghbtns.com/github-btn.html?user=RyoNakagami&repo=RyoNakagami.github.io&type=star&count=true">
                </iframe>
            </p>
            <!--</div> -->
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js "></script>

<!-- Bootstrap Core JavaScript -->
<!-- Currently, only navbar scroll-down effect at desktop still depends on this -->
<script src="/js/bootstrap.min.js "></script>

<!-- Custom Theme JavaScript -->
<script src="/js/ryo-blog.min.js "></script>

<!-- Simple Jekyll Search -->
<script src="/js/simple-jekyll-search.min.js"></script>

<!-- Service Worker -->

<script src="/js/snackbar.js "></script>
<script src="/js/sw-registration.js "></script>


<!-- async load function -->
<script>
    function async(u, c) {
        var d = document, t = 'script',
            o = d.createElement(t),
            s = d.getElementsByTagName(t)[0];
        o.src = u;
        if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
        s.parentNode.insertBefore(o, s);
    }
</script>

<!--
     Because of the native support for backtick-style fenced code blocks
     right within the Markdown is landed in Github Pages,
     From V1.6, There is no need for Highlight.js,
     so Huxblog drops it officially.

     - https://github.com/blog/2100-github-pages-now-faster-and-simpler-with-jekyll-3-0
     - https://help.github.com/articles/creating-and-highlighting-code-blocks/
     - https://github.com/jneen/rouge/wiki/list-of-supported-languages-and-lexers
-->
<!--
    <script>
        async("http://cdn.bootcss.com/highlight.js/8.6/highlight.min.js", function(){
            hljs.initHighlightingOnLoad();
        })
    </script>
    <link href="http://cdn.bootcss.com/highlight.js/8.6/styles/github.min.css" rel="stylesheet">
-->







<!--fastClick.js -->
<script>
    async("//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js", function () {
        var $nav = document.querySelector("nav");
        if ($nav) FastClick.attach($nav);
    })
</script>


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-LVL413SV09"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-LVL413SV09');
</script>



<!-- Side Catalog -->

<script type="text/javascript">
    function generateCatalog(selector) {

        // interop with multilangual 
        if ('' == 'true') {
            _containerSelector = 'div.post-container.active'
        } else {
            _containerSelector = 'div.post-container'
        }

        // init
        var P = $(_containerSelector), a, n, t, l, i, c;
        a = P.find('h1,h2,h3,h4,h5,h6');

        // clean
        $(selector).html('')

        // appending
        a.each(function () {
            n = $(this).prop('tagName').toLowerCase();
            i = "#" + $(this).prop('id');
            t = $(this).text();
            c = $('<a href="' + i + '" rel="nofollow">' + t + '</a>');
            l = $('<li class="' + n + '_nav"></li>').append(c);
            $(selector).append(l);
        });
        return true;
    }

    generateCatalog(".catalog-body");

    // toggle side catalog
    $(".catalog-toggle").click((function (e) {
        e.preventDefault();
        $('.side-catalog').toggleClass("fold")
    }))

    /*
     * Doc: https://github.com/davist11/jQuery-One-Page-Nav
     * Fork by Hux to support padding
     */
    async("/js/jquery.nav.js", function () {
        $('.catalog-body').onePageNav({
            currentClass: "active",
            changeHash: !1,
            easing: "swing",
            filter: "",
            scrollSpeed: 700,
            scrollOffset: 0,
            scrollThreshold: .2,
            begin: null,
            end: null,
            scrollChange: null,
            padding: 80
        });
    });
</script>



<!-- Multi-Lingual -->


<!-- Simple Jekyll Search -->
<script>
    // https://stackoverflow.com/questions/1912501/unescape-html-entities-in-javascript
    function htmlDecode(input) {
        var e = document.createElement('textarea');
        e.innerHTML = input;
        // handle case of empty input
        return e.childNodes.length === 0 ? "" : e.childNodes[0].nodeValue;
    }

    SimpleJekyllSearch({
        searchInput: document.getElementById('search-input'),
        resultsContainer: document.getElementById('search-results'),
        json: '/search.json',
        searchResultTemplate: '<div class="post-preview item"><a href="{url}"><h2 class="post-title">{title}</h2><h3 class="post-subtitle">{subtitle}</h3><hr></a></div>',
        noResultsText: 'No results',
        limit: 50,
        fuzzy: false,
        // a hack to get escaped subtitle unescaped. for some reason, 
        // post.subtitle w/o escape filter nuke entire search.
        templateMiddleware: function (prop, value, template) {
            if (prop === 'subtitle' || prop === 'title') {
                if (value.indexOf("code")) {
                    return htmlDecode(value);
                } else {
                    return value;
                }
            }
        }
    });

    $(document).ready(function () {
        var $searchPage = $('.search-page');
        var $searchOpen = $('.search-icon');
        var $searchClose = $('.search-icon-close');
        var $searchInput = $('#search-input');
        var $body = $('body');

        $searchOpen.on('click', function (e) {
            e.preventDefault();
            $searchPage.toggleClass('search-active');
            var prevClasses = $body.attr('class') || '';
            setTimeout(function () {
                $body.addClass('no-scroll');
            }, 400)

            if ($searchPage.hasClass('search-active')) {
                $searchClose.on('click', function (e) {
                    e.preventDefault();
                    $searchPage.removeClass('search-active');
                    $body.attr('class', prevClasses);  // from closure 
                });
                $searchInput.focus();
            }
        });
    });
</script>



<!-- Image to Github 
<img src="/img/icon_wechat.png" width="0" height="0" />
<-- Migrate from head to bottom, no longer block render and still work -->
<script>
    
    var elements = document.querySelectorAll('p');
    Array.prototype.forEach.call(elements, function(el, i){
        if(el.innerHTML=='[expand]') {
            var parentcontent = el.parentNode.innerHTML.replace('<p>[expand]</p>','<div class="expand" style="display: none; height: 0; overflow: hidden;">').replace('<p>[/expand]</p>','</div>');
            el.parentNode.innerHTML = parentcontent;
        }
    });

    var elements = document.querySelectorAll('div.expand');
    Array.prototype.forEach.call(elements, function(el, i){
        el.previousElementSibling.innerHTML = el.previousElementSibling.innerHTML + '<span>..&nbsp; <a href="#" style="cursor: pointer;" onclick="this.parentNode.parentNode.nextElementSibling.style.display = \'block\'; this.parentNode.parentNode.nextElementSibling.style.height = \'auto\'; this.parentNode.style.display = \'none\';">read&nbsp;more&nbsp;&rarr;</a></span>';
    });

</script>

</body>
</html>
