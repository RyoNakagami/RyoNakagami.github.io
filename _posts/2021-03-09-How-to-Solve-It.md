---
layout: post
title: "いかにして問題を解くか"
subtitle: "問題を解くときの方法論の紹介"
author: "Ryo"
header-img: "img/about-bg.jpg"
header-mask: 0.4
catelog: true
mathjax: true
purpose: 
tags:

- 方法論
---


||概要|
|---|---|
|目的|問題を解くときの方法論の紹介|
|参考|-[いかにして問題を解くか ISBN:978-4-621-04593-0](https://www.maruzen-publishing.co.jp/item/b302341.html)<br>-[問題を解く](http://aozoragakuen.sakura.ne.jp/houhou/houhou00/node4.html)|

<!-- START doctoc -->
<!-- END doctoc -->

## 1. なぜこの記事をまとめたのか？

この記事は G. Polya教授のHow to Solve It（いかにして問題を解くか、柿内賢信訳）を自分なりに振り返り用にまとめたノートです。この本は、数学の問題の解答を読むときに出てくる疑問：

```raw
(1) この証明は正しいけど、どうしたらそれを思いつくのだろうか？
(2) この実験はうまくて事実を示しているが、どうしたらこの実験方法を思いつくのか？
```

このような「数学の問題を解くこと」に関する疑問への答えを「問題を解くとき」の動機や手続きの観点からまとめています。この本はもともとは数学を教える教員と教わる学生を対象に書かれた本ですが、読んでみると数学という分野を超えて参考になる「問題を解くにあたっての姿勢」を紹介しています。日本語版の「訳者のことば」に記載されている想定読者を紹介すると、

```raw
単に数学を教え、あるいは数学を学ぼうとする人たちにだけでなく、...、
自然科学を教え、学び、またはこれを研究する人々にも、
さらにはまた何か新しい創造の仕事に携わろうとする人たちならば
誰にでもぜひ読まれるべき本であると信じたからである。
```

身の回りを振り返ってみると問題に対する解答は与えられているが、回答に至るまでのプロセスが詳細に説明されているケースに出会うことは少ないです。一方、データ分析やその他の仕事の場面では、まだ解答が与えられていない問題を解く必要があり、そのような場面では「問題を解く一般的な方法」を身につけているかいないかが重要になります。問題に対面したときに意識的に方法を考えることが身につけば、その結果として、直面している問題が解け、評価されます。方法をマスターすることも大切ですが，どう解こうかと方法を考える態度を身につけることの方がはるかに大切、と信じてこの記事をまとめました。

最後に本文から引用を紹介します：

```raw
知識が全然なければ解を思いつくことは不可能である。材料があるだけでは家は建たないので、必要なところに適当な材料（知識）を当てがわなければならない。
```

## 2. 課題解決の方針
### 課題解決の進行

1. Question: 問題を理解する・何を求めているのか明確にする
2. Plan：問題を解く計画を立てる
3. Do：計画を実行する
4. Review：得られた解のたしからしさを検証する。そして、知識を確立する。

### 課題解決のステップ

||ステップ|確認ポイント|
|---|---|---|
|1|Question|(1) 未知のものは何か・求めたいものはなにか<br>- 与えられているもの(データ)は何か<br>- 条件は何か <br>- 所与のもの・未知のものに名前をつけて整理する <br><br>(2) 条件を満足させることはできるか・問題は合理的か？<br>- 問題自体に矛盾はないか？<br><br>(3) 条件は未知のものを定めるのに十分であるか、又は不十分であるか、又は余剰であるか、又は矛盾しているか <br><br>(4) 明らかにしたいものと与えられたデータ/条件それぞれに記号をつけてそれぞれの関係性を整理 <br>- 条件の各部を分離して、整理する。<br><br>(5) 問題をわかりやすく説明することはできるか？スラスラ言えるか？|
|2|Plan|**解答方針の設定: proof of sketchを書くイメージ**<br><br>(1) 関連した問題は知っているか？<br>- 未知数をよく見て、未知数が同じかまたは似た問題を探す<br>- 未知数が同じかまたは似た問題に関連して役に立ちそうな定理を知っているか考える<br>- 与えられたデータを役立たせるとそれぞれが未知のものの範囲をどのように画定するか類似した問題を手がかりに調べる<br>- 関連した問題を今回使うことができるか考える<br>- 関連した問題を利用するためにうまく補助要素を導入できるか考える<br><br>(2) 問題を言い換えることができるか？定義に帰って言い換えを試みる。<br><br>(3) まだ問題を解く解答が思いつかないなら、一般的な問題や特殊な問題、類推的な問題を考える。<br><br>(4) 与えられた条件やデータをそのままに未知の対象を変えて、現在直面している問題を解くにあたって役立たせることができる考える。または未知のものを固定して、どのような条件とデータがあれば未知のものが定まるか考える。<br><br>(5) 与えられたデータ/条件をすべて使ったか？問題に含まれる本質的な概念はすべて考慮したか？を考える<br><br> **実行計画の作成**<br><br>(6)方針と整合的な解答（実行計画）をさだめる<br><br> (7)「なにを」「いつ」「どこで」「だれが」「どのように」実行するのかを明確に定義する<br><br>(8) 余計な労働を生み出さない実行計画を作る|
|3|Do|(1) 解答の計画を実行する時、各段階を検討して、その段階が正しいか？考える。<br><br>(2) 忍耐をもって計画をやり切る。|
|4|Review|(1) 結果のRobustness check: 同じ結果をちがった仕方で導くことができるか？<br><br>(2) 得られた結果について、Intuitionを考えて、結果のたしからしさを検証する<br><br>(3) 得られた結果や方法をなにか別の問題に活かすことはできるか？を考え、知識を深める|

### 課題解決力を身につけるためには？

「問題を解き，疑問を解決し，わかったことをまとめる」方法を身につける練習は、本の文章を引用すると

```raw
水泳の練習のようなものです。どんな練習でも真似をして、熟練しなくてはなりません。泳ごうとするならば他人が手足をどのように動かして水面に頭が出るかを見て、その真似をし、熟練によって水泳を覚えるほかはない。
```

つまり、

1. 問題を解くというプロセスの真似をする
2. 真似を通して得た知識を活用して、問題を自力で解く練習を繰り返す
3. 問題解決という活動を精神的習慣として確立する

### 問題を理解・整理する：文字選びのお作法

問題を理解・整理するにあたって所与のもの/未知のものに名前をつけて管理するのが望ましいとされています。名前をつけるにあたって絶対厳守しなくてはならないルールというのはありませんが、遵守が望ましいお作法はあります。

||ルール|例|
|---|---|---|
|(1)|違う種類の量を表すときはアルファベットやギリシャ文字のように異なる文字を使う|三角形の辺をそれぞれa, b, cと表すならば角度はα, β, γと表す。|
|(2)|同じ種類の量を表すときは、indexをつけた文字で管理する|３つの三角形の面積をそれぞれ$$S_1, S_2, S_3$$で表す|

## 3. 問題を理解する

課題に直面したときはまず、問題の全貌を捉えることに集中します。その後、問題の理解を深めるために問題の主な部分の分離を始めます。分離の方法は証明問題か決定問題かに依存しますが、以下のように分離します。

|分類|構成要素|
|---|---|
|証明問題|なにが仮定でなにが証明すべき結論か？|
|決定問題|なにがデータで、なにが条件で、どの未知数を決定すべきかか？|

なぜ分解が必要かというと、サッカーのモウリーニョ監督がチームを率いる際にテーマにしている言葉が参考になります：

```raw
部分部分にあるものがすべてである。つまり、全体を理解できなければ、結局部分を理解することはできない。逆もしかりである。
```

ただし、問題の全体をよく理解しないうちに細かい分類に手を付けるのは悪い習慣であることは常に意識する必要があります。

#### コラム：機械学習をつかっていい感じの成果を出してくれ

「機械学習をつかっていい感じの成果を出してくれ」という曖昧な指示がクライアントから出たとします。一見、どこから手を出していいかわからないオーダーで途方にくれてしまいそうですが、その背後にある商売の流れ・解決したい事業課題をヒアリングするところから始めるのが重要です。商売の流れを理解することで、その会社が目指す成長計画の障壁はどこにあるのか？どのような課題を解決することでその企業が望む成長を達成することができるか考えます。なのでまずヒアリングです。ヒアリングの観点は以下です：

- どのような商品・サービスをどのように売っているのか？
- どのような成長戦略を描いているのか？
- どのような課題に直面しているのか？
- 現場を見て、本質的な課題は何かを探す

このヒアリングと通じて、「どのような課題を解決すべきか？」を明確化し、クライアントと合意します。この段階において、コミュニケーション円滑化の観点から「自分がいままでなにをやってどのような課題を解決してきたのか」「なにができるのか」、をクライアントに伝えることも重要です。事業課題は多数存在し、またそれをクライアントが認識していない場合もあります。ヒアリングで解決できる解決する価値のある事業課題を聞き出すためには「自分はなにものでなにができて他の人とどのように違うのか」を事前に伝えることは有意義だと思います。

次に、「なにをなんのために作るか？」「誰のためになるのか？」という解決方針をクライアントと合意しに行きます。このプロセスを経た後に、具体的に何を作るのか？スケジュール・費用見積もりの話に進みます。解決方針が定まっていないのに具体的な方法論に入ってしまうと、どの具体的な方法が良いのか悪いのかを判断することが難しくなります。最悪手戻りとなる可能性もあるので、一つづつ固められるものは固めていくことは重要です。方針に沿った形で具体的な実行計画候補を複数クライアントに提示し、その中から「世界で最も良い方法」を一緒に探索・合意・実行していきます。その方法が機械学習を用いた方法ならばそれを実施、他に良い方法があるならばそれを実行します。大事なことはあくまでも「事業課題を解決」することだからです。

### 問題は合理的か？




## 4. 計画をたてる
### 補助問題の探し方

問題を理解することができた上で、その問題を解く計画が思いつかない場合は補助問題を考えます。補助問題を考えるにあたって３つの方針があります：

1. 未知のものだけを残し、与えられた条件やデータを変える
2. 与えられたものだけを残して、未知のものを変える
3. 未知のものと与えられたもの両方を変える

結論や未知のものから逆算的(backward)に考えるならば(1) 未知のものだけを残し、与えられた条件やデータを変えるから考えていき、forward的に考えるならば(2) 与えられたものだけを残して、未知のものを変えるを考えます。どちらが良いかはケースバイケースでうまくバランスを取りながら両方の視点を持つことが重要です。ただし、補助問題はあくまでメインの課題を解くために作り出すものなので以下のポイントを忘れていけません：

- 補助問題はメインの問題よりも解きやすいものでなければならない
- 補助問題はメインの問題を解くにあたって役に立つもの、踏み石的存在でなければならない

### 発見的推理とEDA

- 発見的推理は厳密な解答計画の立案には役に立つ
- 発見的推理は最終的で厳密なものではなく仮のもの
- 発見的推理を厳密な解と混同してはならない



## 5. 計画を実行する

1. 忍耐力をもって計画を実行する。失敗してもなぜ失敗したか検証することができる
2. 闇雲に計画を実行するのではなく、形式的論理的に実行計画に矛盾がないか常に確認する
3. 実行計画が複雑な場合は、その計画を大きな段階にわけ、それぞれの段階が矛盾がないか確認する。その後、大きな各段階を更に細かい段階に分け、そこでも矛盾がないか検証する。


## 6. 振り返る：結果のRobustness 

問題を理解し、計画を立て、各段階を検討した上で、計画を実行したとする。しかし、どんなに慎重にそれぞれのステップをこなしたとしても間違いを完全に防ぐことはできません。そのため、どんなときにも計画を実行して得られた結果を検証・振り返ることは必要です。振り返りというプロセスで重要な指針は以下となります：

- 結果や議論を手っ取り早く素早く直感的に試すことができるか？
- 直感的に理解できるか？
- 同じ結果を違った仕方で導くことはできるか？
- 他の事柄との関連で理解できるか？
- 得られた結果を別の事柄に応用できるか？


## 7. 問題解決の例
### 速度の問題
#### 問題文

水が直角円錐形の容器に速度$$r$$で注がれている。容器の底は水平であり、頂点が下を向いているとする。底の半径を$$a$$, 円錐の高さを$$b$$とする。水の深さが$$\gamma$$であるときに水面が上昇する速さを求めよ。

#### 解答方針

||検討項目|説明|
|---|---|---|
|(1)|求めるものは何か？|水面が上昇する速さ。速さとは水の深さが上昇する速度のこと。つまり$$\gamma$$の変化の速度のこと|
|(2)|変化の速度とは何か？|時間を$$t$$とおいたとき、$$d\gamma/dt$$と表される。|
|(3)|与えられたデータうち速度を表すものはあるか？|$$r$$は水の体積の変化の速度を表しています。|
|(4)|$$r$$は水の体積の変化の速度を表しているとは？|容器の体積を$V$とするならば、$$dV/dt = r$$|

以上のことを踏まえると、まず水の高さ$$\gamma$$のときの体積の変化率は以下のように表せます：

$$
\frac{dV(\gamma)}{dt} = \frac{dV(\gamma)}{d\gamma}\frac{\gamma(t)}{dt} = \frac{\pi a^2\gamma^2}{b^2}\frac{\gamma(t)}{dt} = r
$$

よって、

$$
\frac{\gamma(t)}{dt} = \frac{rb^2}{\pi a^2\gamma^2}
$$

この結果は、高さが高いほど変化の速度が小さくなっていることを示しており、直感的にも理解することができます。

### どの化粧品を買っていいかわからない

「どの化粧品が良いのかわからない」という悩みを持っている人は多いと思います。「どの化粧品が良いのかわからない」という課題に直面しているのは理解できますが、これは本質的なものではありません。化粧品は美しくなるために使用するもので、化粧品を用いて解決したい課題はなにかをまず考える必要があります。考える順番としては、

1. 今悩んでいる症状はなにか？
2. その症状はなぜ発生するのか
3. 課題解決方針はなにか？
4. 課題解決方針に適した化粧品はなにか？

この順番はイプサでカウンセリングを受けたときも同様の流れでした。今回は仮にシミを解消したい場合を考えます。

#### シミのメカニズム

シミは肌に黒メラニンが過剰に蓄積し、肌が部分的に茶色に見える状態です。メラニンの発生と蓄積の２つを理解する必要があります。

**(1) メラニンの発生と紫外線**

メラノサイトという細胞がメラニンを生成します。なぜメラニンを作るかというと、紫外線が原因となって肌が傷つけられたとき肌を守るためメラニンという色素が作られます。このメラニンは日傘の役割をします。この日傘を角化細胞（ケラチノサイト）に渡して紫外線から肌を守っています。

**(2) メラニンの過剰蓄積**

シミはメラニンが肌に過剰に蓄積されることで発生する症状です。過剰に蓄積される原因として、(1) メラニンが過剰に生産され過剰にケラチノサイトに渡される、(2) メラニンの排出が滞るの２つが考えられます。(1)の過剰に生産されることに関しても、肌センサーがバグって生成の必要がないタイミングでメラノサイトにメラニン生成信号を渡す場合やメラノサイトが過剰にセンサーに反応してしまうという２つのケースが考えられます。

#### 課題解決方針と美容成分

以上のシミ発生メカニズムを踏まえるとシミの解決方針は以下となります：

|方針|具体アクション|
|---|---|
|紫外線から肌を守る|日焼け止め|
|間違ったメラニン生成命令をストップする|カモミラET<br>トラネキサム算<br>トラネキサム算セチル塩酸塩|
|過剰なメラニンの産生を抑制する|ビタミンC誘導体<br>コウジ酸<br>アルプチン<br>エラグ酸<br>4-n-ブチルレゾルシン<br>リノール酸S<br>4-メトキシサリチル酸カリウム塩など|
|メラニンの受け渡しをブロックする|ニコチン酸アミド|
|滞ったメラニン排出促進|アデノシン一リン酸二ナトリウムOT<br>デクスパンテノールW|


## Appendix：用語紹介

|用語|説明|
|---|---|
|証明問題|数学的な主張を証明することを目的とする問題を証明問題とよびます。証明問題の主要部分は仮定と結論です。証明問題の多くは，「○○○であるとき×××であることを証明せよ」「○○○ならば×××であることを示せ」という形をしています。この○○○の部分が仮定で，×××の部分が結論です。証明問題の目的は，問題の仮定から結論を導き出す論理的な過程を書き下すことです。|
|決定問題|決定問題とは「未知なるものを決定せよ」ということです。決定問題の主要部分は，データと条件と未知のものです。まず「未知のもの」とは，その決定問題で求めるべきものです。次に「条件」とは，その未知のものに関する条件です。最後に「データ」とは，未知のものと条件によって結びついているもののことです。決定問題の多くは、解を決定せよ，解の個数を決定せよ，体積を決定せよ，そして条件(単に条件といえば必要十分条件のことである)を決定せよ等です。|

