---
layout: post
title: "いかにして問題を解くか"
subtitle: "問題を解くときの方法論の紹介"
author: "Ryo"
header-img: "img/about-bg.jpg"
header-mask: 0.4
catelog: true
mathjax: true
purpose: 
tags:

- 方法論
---


||概要|
|---|---|
|目的|問題を解くときの方法論の紹介|
|参考|-[いかにして問題を解くか ISBN:978-4-621-04593-0](https://www.maruzen-publishing.co.jp/item/b302341.html)<br>-[問題を解く](http://aozoragakuen.sakura.ne.jp/houhou/houhou00/node4.html)<br>- [How-to-Write-a-Research-Paper-in-Economics](https://github.com/ryonakimageserver/lecturenotes/blob/main/others/How-to-Write-a-Research-Paper-in-Economics.pdf)<br>- [Some tips for robustness checks and empirical analysis in general](http://deryugina.com/some-tips-for-robustness-checks-and-empirical-analysis-in-general/)<br>- [有名問題・定理から学ぶ数学](https://wkmath.org/diff-seq-f.html)|

<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->

- [1. なぜこの記事をまとめたのか？](#1-%E3%81%AA%E3%81%9C%E3%81%93%E3%81%AE%E8%A8%98%E4%BA%8B%E3%82%92%E3%81%BE%E3%81%A8%E3%82%81%E3%81%9F%E3%81%AE%E3%81%8B)
- [2. 課題解決の方針](#2-%E8%AA%B2%E9%A1%8C%E8%A7%A3%E6%B1%BA%E3%81%AE%E6%96%B9%E9%87%9D)
  - [課題解決の進行](#%E8%AA%B2%E9%A1%8C%E8%A7%A3%E6%B1%BA%E3%81%AE%E9%80%B2%E8%A1%8C)
  - [課題解決のステップ](#%E8%AA%B2%E9%A1%8C%E8%A7%A3%E6%B1%BA%E3%81%AE%E3%82%B9%E3%83%86%E3%83%83%E3%83%97)
  - [課題解決力を身につけるためには？](#%E8%AA%B2%E9%A1%8C%E8%A7%A3%E6%B1%BA%E5%8A%9B%E3%82%92%E8%BA%AB%E3%81%AB%E3%81%A4%E3%81%91%E3%82%8B%E3%81%9F%E3%82%81%E3%81%AB%E3%81%AF)
  - [Good Tips](#good-tips)
- [3. 問題を理解する](#3-%E5%95%8F%E9%A1%8C%E3%82%92%E7%90%86%E8%A7%A3%E3%81%99%E3%82%8B)
  - [なにを解きたいのか明らかにする](#%E3%81%AA%E3%81%AB%E3%82%92%E8%A7%A3%E3%81%8D%E3%81%9F%E3%81%84%E3%81%AE%E3%81%8B%E6%98%8E%E3%82%89%E3%81%8B%E3%81%AB%E3%81%99%E3%82%8B)
  - [その問題は解く価値のあるものか？](#%E3%81%9D%E3%81%AE%E5%95%8F%E9%A1%8C%E3%81%AF%E8%A7%A3%E3%81%8F%E4%BE%A1%E5%80%A4%E3%81%AE%E3%81%82%E3%82%8B%E3%82%82%E3%81%AE%E3%81%8B)
  - [問題の主要部分を把握する](#%E5%95%8F%E9%A1%8C%E3%81%AE%E4%B8%BB%E8%A6%81%E9%83%A8%E5%88%86%E3%82%92%E6%8A%8A%E6%8F%A1%E3%81%99%E3%82%8B)
  - [問題は合理的か？](#%E5%95%8F%E9%A1%8C%E3%81%AF%E5%90%88%E7%90%86%E7%9A%84%E3%81%8B)
  - [記号の導入](#%E8%A8%98%E5%8F%B7%E3%81%AE%E5%B0%8E%E5%85%A5)
- [4. 解答方針をたてる](#4-%E8%A7%A3%E7%AD%94%E6%96%B9%E9%87%9D%E3%82%92%E3%81%9F%E3%81%A6%E3%82%8B)
  - [解答の条件](#%E8%A7%A3%E7%AD%94%E3%81%AE%E6%9D%A1%E4%BB%B6)
  - [ゴールからたどる](#%E3%82%B4%E3%83%BC%E3%83%AB%E3%81%8B%E3%82%89%E3%81%9F%E3%81%A9%E3%82%8B)
  - [定義に立ちかえる](#%E5%AE%9A%E7%BE%A9%E3%81%AB%E7%AB%8B%E3%81%A1%E3%81%8B%E3%81%88%E3%82%8B)
  - [補助問題を探す](#%E8%A3%9C%E5%8A%A9%E5%95%8F%E9%A1%8C%E3%82%92%E6%8E%A2%E3%81%99)
  - [発見的推理：具体例を観察して規則性を見つける](#%E7%99%BA%E8%A6%8B%E7%9A%84%E6%8E%A8%E7%90%86%E5%85%B7%E4%BD%93%E4%BE%8B%E3%82%92%E8%A6%B3%E5%AF%9F%E3%81%97%E3%81%A6%E8%A6%8F%E5%89%87%E6%80%A7%E3%82%92%E8%A6%8B%E3%81%A4%E3%81%91%E3%82%8B)
  - [組織化](#%E7%B5%84%E7%B9%94%E5%8C%96)
- [5. 解答方針に基づき解答実行計画をたてる](#5-%E8%A7%A3%E7%AD%94%E6%96%B9%E9%87%9D%E3%81%AB%E5%9F%BA%E3%81%A5%E3%81%8D%E8%A7%A3%E7%AD%94%E5%AE%9F%E8%A1%8C%E8%A8%88%E7%94%BB%E3%82%92%E3%81%9F%E3%81%A6%E3%82%8B)
  - [ゴールまでの過程をもれなく記述する](#%E3%82%B4%E3%83%BC%E3%83%AB%E3%81%BE%E3%81%A7%E3%81%AE%E9%81%8E%E7%A8%8B%E3%82%92%E3%82%82%E3%82%8C%E3%81%AA%E3%81%8F%E8%A8%98%E8%BF%B0%E3%81%99%E3%82%8B)
  - [実行計画を実施前に振り返る](#%E5%AE%9F%E8%A1%8C%E8%A8%88%E7%94%BB%E3%82%92%E5%AE%9F%E6%96%BD%E5%89%8D%E3%81%AB%E6%8C%AF%E3%82%8A%E8%BF%94%E3%82%8B)
  - [テストケースの作成](#%E3%83%86%E3%82%B9%E3%83%88%E3%82%B1%E3%83%BC%E3%82%B9%E3%81%AE%E4%BD%9C%E6%88%90)
  - [進捗管理方法の作成](#%E9%80%B2%E6%8D%97%E7%AE%A1%E7%90%86%E6%96%B9%E6%B3%95%E3%81%AE%E4%BD%9C%E6%88%90)
  - [分析計画例](#%E5%88%86%E6%9E%90%E8%A8%88%E7%94%BB%E4%BE%8B)
  - [因果推論における実行計画](#%E5%9B%A0%E6%9E%9C%E6%8E%A8%E8%AB%96%E3%81%AB%E3%81%8A%E3%81%91%E3%82%8B%E5%AE%9F%E8%A1%8C%E8%A8%88%E7%94%BB)
- [6. 計画を実行する](#6-%E8%A8%88%E7%94%BB%E3%82%92%E5%AE%9F%E8%A1%8C%E3%81%99%E3%82%8B)
- [7. 振り返る](#7-%E6%8C%AF%E3%82%8A%E8%BF%94%E3%82%8B)
- [8. 問題解決の例](#8-%E5%95%8F%E9%A1%8C%E8%A7%A3%E6%B1%BA%E3%81%AE%E4%BE%8B)
  - [速度の問題](#%E9%80%9F%E5%BA%A6%E3%81%AE%E5%95%8F%E9%A1%8C)
  - [必要十分条件の見極め](#%E5%BF%85%E8%A6%81%E5%8D%81%E5%88%86%E6%9D%A1%E4%BB%B6%E3%81%AE%E8%A6%8B%E6%A5%B5%E3%82%81)
  - [等しいものを文字に置く](#%E7%AD%89%E3%81%97%E3%81%84%E3%82%82%E3%81%AE%E3%82%92%E6%96%87%E5%AD%97%E3%81%AB%E7%BD%AE%E3%81%8F)
  - [どの化粧品を買っていいかわからない](#%E3%81%A9%E3%81%AE%E5%8C%96%E7%B2%A7%E5%93%81%E3%82%92%E8%B2%B7%E3%81%A3%E3%81%A6%E3%81%84%E3%81%84%E3%81%8B%E3%82%8F%E3%81%8B%E3%82%89%E3%81%AA%E3%81%84)

<!-- END doctoc generated TOC please keep comment here to allow auto update -->

## 1. なぜこの記事をまとめたのか？

この記事は G. Polya教授のHow to Solve It（いかにして問題を解くか、柿内賢信訳）を自分なりに振り返り用にまとめたノートです。この本は、数学の問題の解答を読むときに出てくる疑問：

```raw
(1) この証明は正しいけど、どうしたらそれを思いつくのだろうか？
(2) この実験はうまくて事実を示しているが、どうしたらこの実験方法を思いつくのか？
```

このような「数学の問題を解くこと」に関する疑問への答えを「問題を解くとき」の動機や手続きの観点からまとめています。この本はもともとは数学を教える教員と教わる学生を対象に書かれた本ですが、読んでみると数学という分野を超えて参考になる「問題を解くにあたっての姿勢」を紹介しています。日本語版の「訳者のことば」に記載されている想定読者を紹介すると、

```raw
単に数学を教え、あるいは数学を学ぼうとする人たちにだけでなく、...、
自然科学を教え、学び、またはこれを研究する人々にも、
さらにはまた何か新しい創造の仕事に携わろうとする人たちならば
誰にでもぜひ読まれるべき本であると信じたからである。
```

身の回りを振り返ってみると問題に対する解答は与えられているが、回答に至るまでのプロセスが詳細に説明されているケースに出会うことは少ないです。一方、データ分析やその他の仕事の場面では、まだ解答が与えられていない問題を解く必要があり、そのような場面では「問題を解く一般的な方法」を身につけているかいないかが重要になります。問題に対面したときに意識的に方法を考えることが身につけば、その結果として、直面している問題が解け、評価されます。方法をマスターすることも大切ですが，どう解こうかと方法を考える態度を身につけることの方がはるかに大切、と信じてこの記事をまとめました。

## 2. 課題解決の方針
### 課題解決の進行

- Question: 問題を理解する・何を求めているのか明確にする
- Plan：問題を解く計画を立てる
- Do：計画を実行する
- Review：得られた解のたしからしさを検証する。そして、知識を確立する。

### 課題解決のステップ

||ステップ|確認ポイント|
|---|---|---|
|1|Question|(1) 未知のものは何か・求めたいものはなにか<br>- 与えられているもの(データ)は何か<br>- 条件は何か <br>- 所与のもの・未知のものに名前をつけて整理する <br><br>(2) 条件を満足させることはできるか・問題は合理的か？<br>- 問題自体に矛盾はないか？<br><br>(3) 条件は未知のものを定めるのに十分であるか、又は不十分であるか、又は余剰であるか、又は矛盾しているか <br><br>(4) 明らかにしたいものと与えられたデータ/条件それぞれに記号をつけてそれぞれの関係性を整理 <br>- 条件の各部を分離して、整理する。<br><br>(5) 問題をわかりやすく説明することはできるか？スラスラ言えるか？|
|2|Plan|**解答方針の設定: proof of sketchを書くイメージ**<br><br>(1) 関連した問題は知っているか？<br>- 未知数をよく見て、未知数が同じかまたは似た問題を探す<br>- 未知数が同じかまたは似た問題に関連して役に立ちそうな定理を知っているか考える<br>- 与えられたデータを役立たせるとそれぞれが未知のものの範囲をどのように画定するか類似した問題を手がかりに調べる<br>- 関連した問題を今回使うことができるか考える<br>- 関連した問題を利用するためにうまく補助要素を導入できるか考える<br><br>(2) 問題を言い換えることができるか？定義に帰って言い換えを試みる。<br><br>(3) まだ問題を解く解答が思いつかないなら、一般的な問題や特殊な問題、類推的な問題を考える。<br><br>(4) 与えられた条件やデータをそのままに未知の対象を変えて、現在直面している問題を解くにあたって役立たせることができる考える。または未知のものを固定して、どのような条件とデータがあれば未知のものが定まるか考える。<br><br>(5) 与えられたデータ/条件をすべて使ったか？問題に含まれる本質的な概念はすべて考慮したか？を考える<br><br> **実行計画の作成**<br><br>(6)方針と整合的な解答（実行計画）をさだめる<br><br> (7)「なにを」「いつ」「どこで」「だれが」「どのように」実行するのかを明確に定義する<br><br>(8) 余計な労働を生み出さない実行計画を作る|
|3|Do|(1) 解答の計画を実行する時、各段階を検討して、その段階が正しいか？考える。<br><br>(2) 忍耐をもって計画をやり切る。|
|4|Review|(1) 結果のRobustness check: 同じ結果をちがった仕方で導くことができるか？<br><br>(2) 得られた結果について、Intuitionを考えて、結果のたしからしさを検証する<br><br>(3) 得られた結果や方法をなにか別の問題に活かすことはできるか？を考え、知識を深める|

### 課題解決力を身につけるためには？

「問題を解き，疑問を解決し，わかったことをまとめる」方法を身につける練習は、

1. 問題を解くというプロセスの真似をする
2. 真似を通して得た知識を活用して、問題を自力で解く練習を繰り返す
3. 問題解決という活動を習慣として確立する
4. 課題解決の各ステップで頻繁に周りの人と相談する

### Good Tips

- `You need to think more and do less`

## 3. 問題を理解する

課題に直面したときはまず、問題の構造を見抜くことに集中します。

### なにを解きたいのか明らかにする

未知のものはなにか？与えられているものはなにか？条件はなにか？を明確にします。

**経済学における例**

詳しくは[こちら](https://github.com/ryonakimageserver/lecturenotes/blob/main/others/How-to-Write-a-Research-Paper-in-Economics.pdf)参照

- 預金金利が5%上昇した場合、個人はマンスリーベースでどのくらい貯蓄するようになるのか？
- ゼリーの価格が上昇したとき、ピーナッツバターの価格はどれくらい上昇するのか？
- 交通プロジェクトの管理を地方自治体/中央当局が行う場合では、交通プロジェクトにおける汚職は少ないか？

というQuesitonが考えられます。経済学におけるResearch Questionは(1) Theoretical (2) Empiricalに分類されます。

|分類|説明|
|---|---|
|Theoretical|状況や主体について合理的な仮定を立て、リサーチ・クエスチョンで示された事象が実現した場合に「理論的に」何が起こるかを予測することを目的とします。<br><br>- Question<br>- Model<br>- Conclusion|
|Empirical|DataからReserch Questionの答えを導き出すことを目的とします。<br><br>- Question<br>- Empirical strategy<br>- Data <br>- Estimation<br>- Results<br>- Robustness checks<br>- Conclusion|

**機械学習をつかっていい感じの成果を出してくれ**

「機械学習をつかっていい感じの成果を出してくれ」という曖昧な指示がクライアントから出たとします。一見、どこから手を出していいかわからないオーダーで途方にくれてしまいそうですが、その背後にある商売の流れ・解決したい事業課題をヒアリングするところから始めるのが重要です。商売の流れを理解することで、その会社が目指す成長計画の障壁はどこにあるのか？どのような課題を解決することでその企業が望む成長を達成することができるか考えます。なのでまずヒアリングです。ヒアリングの観点は以下です：

- どのような商品・サービスをどのように売っているのか？
- どのような成長戦略を描いているのか？
- どのような課題に直面しているのか？
- 現場を見て、本質的な課題は何かを探す

このヒアリングと通じて、「どのような課題を解決すべきか？」を明確化し、クライアントと合意します。この段階において、コミュニケーション円滑化の観点から「自分がいままでなにをやってどのような課題を解決してきたのか」「なにができるのか」、をクライアントに伝えることも重要です。事業課題は多数存在し、またそれをクライアントが認識していない場合もあります。ヒアリングで解決できる解決する価値のある事業課題を聞き出すためには「自分はなにものでなにができて他の人とどのように違うのか」を事前に伝えることは有意義だと思います。

次に、「なにをなんのために作るか？」「誰のためになるのか？」という解決方針をクライアントと合意しに行きます。このプロセスを経た後に、具体的に何を作るのか？スケジュール・費用見積もりの話に進みます。解決方針が定まっていないのに具体的な方法論に入ってしまうと、どの具体的な方法が良いのか悪いのかを判断することが難しくなります。最悪手戻りとなる可能性もあるので、一つづつ固められるものは固めていくことは重要です。方針に沿った形で具体的な実行計画候補を複数クライアントに提示し、その中から「世界で最も良い方法」を一緒に探索・合意・実行していきます。その方法が機械学習を用いた方法ならばそれを実施、他に良い方法があるならばそれを実行します。大事なことはあくまでも「事業課題を解決」することだからです。

### その問題は解く価値のあるものか？

「この問題が解けるとなぜ嬉しいのか」という質問に答えられるかどうかにかかってきます。

- 上司や同僚に「この問題が解けるとなぜ嬉しいのか」を伝えられるか実践する
- (1) 何を目指していて, (2) なにがゴールの障壁になっていて, (3) 今回の問題がその障壁の解決にどのようにつながるのかをストーリーで話せるか？
- そもそも解けそうか？
- 自分自身にMotivationがあるかないか？

### 問題の主要部分を把握する

多くの問題は以下のように分類することができます。

|分類|説明|明確にすべきこと|
|---|---|---|
|証明問題|数学的な主張を証明することを目的とする問題を証明問題とよびます。証明問題の主要部分は仮定と結論です。証明問題の多くは，「○○○であるとき×××であることを証明せよ」「○○○ならば×××であることを示せ」という形をしています。この○○○の部分が仮定で，×××の部分が結論です。証明問題の目的は，問題の仮定から結論を導き出す論理的な過程を書き下すことです。|なにが仮定でなにが証明すべき結論か？|
|決定問題|決定問題とは「未知なるものを決定せよ」ということです。決定問題の主要部分は，データと条件と未知のものです。まず「未知のもの」とは，その決定問題で求めるべきものです。次に「条件」とは，その未知のものに関する条件です。最後に「データ」とは，未知のものと条件によって結びついているもののことです。決定問題の多くは、解を決定せよ，解の個数を決定せよ，体積を決定せよ，そして条件(単に条件といえば必要十分条件のことである)を決定せよ等です。|なにがデータで、なにが条件で、どの未知数を決定すべきかか？|

この分類を参考にして、課題の全体像を把握します。その後、細部に入っていきます。具体的には、与えられた条件/仮定を分離して、書き表すことです。

### 問題は合理的か？

- 条件/仮説は、それが余計なものを含んでいるとき余剰といい、また互いに食い違っている時を矛盾といいます
- 条件・Data/仮説が解を出すにあたって十分か否か？

> 例1

矛盾する問題<br><br>三角形ABCについて、辺ABの長さは1で、辺BCの長さは2である。そして、角BCAの大きさは45度である。このとき、三角形ABCの面積を求めよ。

この問題は、与えられた条件を満たす三角形がないので存在しない。

> 例2

$$
\begin{aligned}
&3x + 2y + z = 10\\
&x + y + z = 6\\
&2y + z = 4\\
\end{aligned}
$$

と式が与えられたとき、$$(x, y, z)$$の組を求めよ、という問題が与えられたとする。

この連立方程式は矛盾はないが、三つの式は独立でなく解が決定されません。

### 記号の導入

問題を理解するにあたってまず考えるべきことは、問題文を数式等の数学用語に翻訳するためにどのような設定をするか、 つまり、何をどにように置くか、です。問題に対して適切に文字を置き， 式に翻訳できれば三分の一は解けたようなものと言われています。([こちら参照](http://aozoragakuen.sakura.ne.jp/houhou/houhou01/node29.html))

1. 複雑な式のなかから共通の形を見いだし， それを別の文字で置き換える．
2. いくつかの式のとる値が等しいとして与えられている条件は， この等しい値を文字で表す．
3. 変化する量があればその量を変数で表す． 未知量を求めるときは，方程式として解く．
4. 条件が「何々が存在する」とあれば， 存在するものを文字に置き，存在する必要条件を求める．
5. 図形を一般性を失わないで， できるだけ単純な式になるように座標平面に置く．
6. 考える対象が量の関係なら，変数を導入し， 他の量との関係を調べ，関数形に表す．
7. 座標のなかで動きのあるものを， 適当な変数(媒介変数，パラメーター)で表す．
8. 自然数 $$n$$ によって定まる場合の数や確率は $$a_n$$ など数列におく．そのうえで漸化式を考える．


**問題を理解・整理する：文字選びのお作法**

問題を理解・整理するにあたって所与のもの/未知のものに名前をつけて管理するのが望ましいとされています。名前をつけるにあたって絶対厳守しなくてはならないルールというのはありませんが、遵守が望ましいお作法はあります。

||ルール|例|
|---|---|---|
|(1)|違う種類の量を表すときはアルファベットやギリシャ文字のように異なる文字を使う|三角形の辺をそれぞれa, b, cと表すならば角度はα, β, γと表す。|
|(2)|同じ種類の量を表すときは、indexをつけた文字で管理する|３つの三角形の面積をそれぞれ$$S_1, S_2, S_3$$で表す|
|(3)|記号は曖昧であってはならない。同じ問題で同じ記号が違った意味をもつことは許されない||
|(4)|覚えやすいものでなればならない|体積を表す変数はVolumeより$$V$$を当てるべき|


## 4. 解答方針をたてる

解答計画をたてるということは

1. 解答方針をたてる
2. 解答方針に基づき解答実行計画をたてる

という流れになります。

### 解答の条件

まず解答が解答であるための必要十分な条件がわからなければ解答を書くことはできません。解答とは、

```raw
前提の下で，求められた内容を決定し，その根拠を示す．
```

ことです。根拠を示すのは論証のそれぞれの段階においても必要であり，解答全体として仮定条件から結論条件を導くことができているか，この両面で確認しなければなりません。例えば確率の問題で「3個のサイコロを振る．和が3の倍数になる確率を求めよ」を解こうとします．このとき 

> サイコロの目の出方は$$6^3$$通りあり、そのうち和が３の倍数になるのは・・・

と論述を進める人が多いですが、3個のサイコロを振る$$\Rightarrow$$目の出方は$$6^3$$通りあるという流れなので根拠を示す必要があります。

> 三つのサイコロを区別する．それぞれのサイコロの目の出方は6通りあり，各サイコロの目の出方は独立なので，サイコロの目の出方は$$6^3$$通りあり、そのうち和が３の倍数になるのは・・・

このように前提から一個一個ゴールにたどり着くために必要な要素を根拠とともに示していき、最終的に完成したものが解答となります。

必要条件にまつわる解答の書き方の例は[こちらの問題](#%E5%BF%85%E8%A6%81%E5%8D%81%E5%88%86%E6%9D%A1%E4%BB%B6%E3%81%AE%E8%A6%8B%E6%A5%B5%E3%82%81)参照。

### ゴールからたどる

解凍方針を考えるにあたって、問題のゴールから逆にたどって、「問題のゴールにたどり着くためには何がわかればよいのか？」をまず考えることは有効です。

> 問題

$$0 < x < 1, 0 < y < 1, 0 < z < 1$$のとき、次の不等式が成り立つことを証明せよ

$$
\begin{aligned}
(1) & xy + 1 > x + y\\
(2) & xyz + 2 > x + y + z\\
(3) & xy^2z + 3 > x + 2y + z\\
\end{aligned}
$$

> 解答 (1) 

ゴールを同値変形して解きやすい形に問題を変形します。

$$ 0<x<1 $$, $$ 0 <y< 1 $$ より $$x-1 < 0$$, $$y-1 < 0$$ なので 

$$
xy + 1 - (x + y) = (x - 1)(y - 1) > 0 \therefore \: \: xy + 1 > x + y
$$

> 解答 (2)

$$0 < xy < 1$$なので(1)より

$$
xyz + 2 = (xy)z + 1 + 1 > xy + z + 1
$$

(1)より $$xy + z + 1 > x + y + z$$なので、題意が示された。

> 解答 (3)

$$ 0 < xy < 1$$, $$ 0 < yz < 1$$なので(1)より

$$
xy^2z + 3 = (xy)(yz) + 1 + 2 > xy + 1 + yz + 1 > x + y + y + z 
$$

よって題意が示された． 

<div style="text-align: right;">
■
</div>


### 定義に立ちかえる

糸口がわからないとき、まず考えるべきことは、問題文中の言葉および記号の意味ははっきりわかっているか、ということです。そこをおさえることで解決の糸口がつかめることが少なくないです。それを「定義に立ちかえる」とここでいいます。それには二つの側面があります。

1. 学校で習ったはずの言葉の正確な意味を押さえる
2. 出題者が定めた記号の意味を， 自分がわかっている言葉で言い換える

### 補助問題を探す

解きたい問題が難しい場合には、少し易しい問題に変形して解いてみると、基の問題を解くためのヒントを得られる場合があります。この少し易しい問題のことを補助問題といいます。

> 例

$$
x^4 - 13x^2 + 36 = 0
$$

という方程式を満たす$$x$$を求めたいとします。$$y = x^2$$とおくと

$$
y^2 - 13 y + 36 = (y-4)(y-9) = 0
$$

と求めやすい問題に変形することができます。よって、$$y \in (4, 9)$$ Then, $$x \in (-3, -2, 2, 3)$$

<div style="text-align: right;">
■
</div>

**補助問題の条件**

補助問題はあくまでメインの課題を解くために作り出すものです。なので補助問題であるための必要条件として以下が挙げられます：

- 補助問題はメインの問題よりも解きやすいものでなければならない
- 補助問題はメインの問題よりも解きやすいと事前に予測できなければならない
- 補助問題はメインの問題を解くにあたって役に立つもの、踏み石的存在でなければならない

**補助問題の見つけ方:同値変形**

基本的には直面している問題を同値変形することで補助問題を見つけていきます。

$$p$$が等式や命題(等式も命題だが)であるとき, $$p \iff q$$と同値関係を保って別の等式や命題 $$q$$ に変形することを同値変形といいます。例えば

$$
\begin{aligned}
x - \sqrt{x - 1} = 3 &\iff x - 3 = \sqrt{x - 1}\\
&\iff (x - 3)^2 = x - 1 \:\text{ かつ }\: x\geq 3\\
&\iff x^2 - 7x + 10 = 0 \:\text{ かつ }\: x\geq 3\\
&\iff (x - 2)(x - 5) = 0 \:\text{ かつ }\: x\geq 3\\
&\iff x = 5
\end{aligned}
$$

補助問題は同値変形かどうか確認することは重要です。与えられた条件からもっと狭い条件に変形してしまうと解が減ることになるし、広くしてしまうと不適当な、その問題となんの関係もないでたらめな解を持ち込むことになります。

**考える方法としての必要条件**

基本的には同値変形を繰り返していけばよいですが、それが簡単ではない場合，「必要条件で絞ったものを個別に確認する」という方針は有効です。つまり、

1. 問題の条件や仮定を使って、いくつかの候補に絞る
2. その候補を１つずつ調べて答えを探す

> 例題

すべての正の整数 $$n$$ に対して $$5^n+an+b$$ が16の倍数となるような16以下の正の整数 $$a,\ b$$ を求めよ．

> 解

$$
f(n) = 5^n + an + b
$$

とおきます。すべての正の整数 $$n$$ に対して$$f(n)$$は16の倍数なので


$$
f(16) = 5^16 + 16a + b = 16k \equiv 0 \: \text{ mod } 16
$$

よって、$$b = 15$$。

同様に

$$
f(1) = 5 + a + 15 = 20 + a\equiv 0 \: \text{ mod } 16
$$

よって、$$a = 12$$と必要条件とわかる。

つぎに、$$(a, b) = (12, 15)$$が十分条件であることを示す。

$$
\begin{aligned}
f(n) & = 5^n + 12n + 15\\
& = (1 + 4)^n + 12n + 15\\
& = 16 + 16n + (_nC_{n-2}4^2 + \cdots + 4^n) \because \text{ 二項定理}
\end{aligned}
$$

よって、十分条件であることが確認された。

<div style="text-align: right;">
■
</div>

### 発見的推理：具体例を観察して規則性を見つける

抽象的な問題，一般的に自然数 $$n$$ について証明する問題などでは， 例を作って考えることが問題をとらえるうえで有効です。流れとして以下です：

1. こうではないかという仮説を立てる
2. それを個別実験で確かめる
3. 実験でまちがいないとなると，なぜそれが成り立つのか理論を追求する

ステップ1, 2をクリアした段階で得られた推測を発見的推理といいます。この発見的推理は個別事例では成り立つが、最終的に解きたい問題にはまだ直接適用することはできません。発見的推理は厳密な解答方針の立案には役に立ちますが、あくまで発見的推理は最終的で厳密なものではなく仮のものであり、厳密な解と混同してはなりません。

**モーザーの円分割問題：誤った推論**

円周上に $$n$$ 個の頂点を打ち，その全ての2頂点間を線分で結ぶ。このとき，円は $$M$$ 個の領域に分割されるとする。ただし、円の内側において３本以上の線分が一点に交わることはないようにする。このとき、$$M$$は$$n$$によってどのように表されるか？

> 誤った推論

「具体例を観察して規則性を見つける」という方針で考えてみます。点が一個のときは１個の部分に分割、点が2個のときは２個に分割。これで点5個まで調べていくと以下のような関係性になります。

<div class="math display" style="overflow: auto">
$$
\begin{array}{|c|c|c|c|c|}
\hline
n\text{点の個数} & 1 & 2 & 3 & 4 & 5 \\ \hline
M & 1 & 2 & 4 & 8 & 16  \\ \hline
\end{array}
$$
</div>

別れた部分の個数は点が1個増えるたびに2倍となる関係性があると推測できます。$$M = 2^{n-1}$$と予測するのは妥当と思われます。しかし、$$n = 6$$のとき、$$M = 31$$となってしまい、予測が正しくないことが確認できます。よって、「いくつかの具体例で正しいからすべての場合に正しい」と推論してはならないとわかります。

> 正しい解答

$$k+1$$ 個の頂点がある場合について考える。頂点を（時計回りの順番で）$$P_0,P_1,\cdots,P_k$$とします。$$P_1​, \cdots ,P_k​$$ たちを結ぶ線分によって領域は $$M_k$$ 個に分割されているとします。そこに線分 $$P_0P_i\:(i=1,\cdots,k)$$を追加することで領域がいくつ増えるかを考えます。

<img src="https://github.com/ryonakimageserver/omorikaizuka/blob/master/%E3%83%96%E3%83%AD%E3%82%B0%E7%94%A8/20210309-Moser-sequence.png?raw=true">

既存の弦と交わるたびに領域が1個ずつ増えて, 点 $$P_i$$ に達したときに領域がさらに1個増えます。線分 $$P_0P_i$$ は $$(i−1)(k−i)$$ 本の線分とぶつかるので，領域を $$(i−1)(k−i)+1$$ 個増やします。よって、$$P_0$$を追加することで

$$
\begin{aligned}
M_{k+1} - M_{k} &= \sum_{i=1}^k\{(i−1)(k−i)+1\} \\
&= -\frac{k(k+1)(2k+1)}{6} + (k+1)\frac{k(k+1)}{2} + (1 - k)k\\
&= \frac{1}{6}k^3 - \frac{1}{2}k^2 + \frac{4}{3}k
\end{aligned}
$$

$$M_1 = 1$$なので, $$n \geq 2$$について、

$$
\begin{aligned}
M_n &= M_1+\sum_{k = 1}^{n-1}\frac{1}{6}k(k^2-3k+8) \\ 
&= 1+\frac{1}{6}\sum_{k = 1}^{n-1}(k^3-3k^2+8k) \\ 
&= 1+\frac{1}{6}\left\{\frac{1}{4}(n-1)^2n^2\right. \\ 
&\qquad \left.-3\cdot\frac{1}{6}(n-1)n(2n-1)+8\cdot\frac{1}{2}(n-1)n\right\} \\ 
&= 1+\frac{1}{24}(n-1)n\{ (n-1)n-2(2n-1)+16\} \\ 
&= 1+\frac{1}{24}(n-1)n(n^2-5n+18) \\ 
&= \frac{1}{24}(n^4-6n^3+23n^2-18n+24) 
\end{aligned}
$$

が得られる. これは $$n=1$$ のときも成り立つ. ゆえに, すべての正の整数 $$n$$ に対して 

$$
M_n = \frac{1}{24}(n^4-6n^3+23n^2-18n+24) 
$$

が成り立ちます。

<div style="text-align: right;">
■
</div>

**例：次元によるテスト**

次元によるテストは幾何学や物理学の問題を試すのによく知られた方法です。単振動、すなわち小さくて思い物体が一定の長さの重さのない紐の先に吊るしてあるものを考えます。

- $$l$$: 紐の長さ
- $$g$$: 重力加速度
- $$T$$: 振り子の周期

ここで振り子の周期が紐の長さと重力加速度とどのように関係しているか調べたいとします。力学的推論によって、

$$
T = cl^mg^n \: \text{ where } m, n :\ \text{ is constant}
$$

と予測したとします。このとき定数$$c, m, n$$をどのように定めればいいのかが論点となります。そこで次元に注目します。

$$T$$は周期だから時間によって表されその単位は $$sec$$, $$l$$は長さなので $$cm$$, $$g$$は加速度なので $$cm/sec^2$$. 定数 $$c$$は $$cm^0 = 1$$ とします。次元のテストは

$$
sec = 1\cdot (cm)^m\cdot (cm/sec^2)^n = (cm)^{m+n} cdot (sec)^{-2n}
$$

左辺と右辺の単位は同じでなければならないので

$$
m+n = 0, -2n = 1
$$

よって、

$$
n = -\frac{1}{2}, m = \frac{1}{2}
$$

を得ます。ただし、$$c$$の値はわかりません。また、この推論が確からしいかどうかはわかりません。


### 組織化

問題を解くにはばらばらの事実を寄せ集めただけでは不十分です。それらの事実を結びつけて、当面の問題に適した形にまとめ上げることが必要です。このまとめ上げる活動をここで知識の「組織化」と呼びます。解答方針を作成することはまさに知識の「組織化」活動です。地道に課題解決を実践していくことで身につけていくものですが、一旦「組織化」を実施したあとに次のことを自問自答することは有効です

- すべてのデータ/条件をつかったか？
- 問題に含まれている大切な概念はすべて考慮にいれたか？

## 5. 解答方針に基づき解答実行計画をたてる

実行計画を書くにあたっての基本方針は、

1. 「最終的に伝えるべきメッセージ（解答）」を考えたとき、じぶんならどういう分析結果があれば納得するのか？
2. その分析結果へ、どのような手順でたどり着くのか？
3. 他人が解答の正しさを検討できるようになっているか？

となります。

### ゴールまでの過程をもれなく記述する

実行計画を書くときには、自分と他人が正しさを検討できるように書かなくてはなりません。そのためには、原則として、問題のゴールに至る計算や論理展開の道筋をもれなく記述することが良いです。ただし、読み手が簡単に再現できる過程まで詳しく書いてしまうと、伝えたい本丸のメッセージが埋もれてしまうデメリットがあります。

しかし、答えを短くするのは、一旦計画を記述したあとでもできるので、まず初手では全体の工程をもれなく記述することが重要となります。

### 実行計画を実施前に振り返る

実行計画を書いた後、すぐに着手するのではなく、その確からしさを検討することは有用です。これについて、以下のポイントを自問自答することがおすすめです

- 与えられたデータ/条件をすべて使ったか？
- 問題に含まれる本質的な概念はすべて考慮したか？を考える
- 結果をためすことができるか？
- わかりやすくするため、無駄な議論を省く

議論の無駄を省くことは特に重要で、議論の流れのわかりやすさを向上させるだけでなく、実行計画の省エネルギー化も効果として期待できます。長ったらしい計画は、議論の方向性があっていても実行時にミスを招くリスクがあります。

### テストケースの作成

実行計画作成の段階で、実行後に得られる結果のテストケースを用意します。テストケースを明確化することで、

1. 最終的に得られる結果が自分たちがもともと意図したものなのか？
2. 意図している結果の条件はなんなのか？
3. 実行計画作成の段階で、考慮すべき項目をちゃんと考慮しているのか？

を言語で明確化することができます。
### 進捗管理方法の作成

進捗管理方法を定めることで、実行段階において、誰がどのステータスにいて、いつまでになにをやらなくてはならないか？を明確化することできます。これの効果は

1. 問題を解くにあたって迷子になることでモチベーションが下がってしまうことを防止する
2. 進捗状況が予定通り行かない場合、もともとの計画が間違っている可能性があり、その兆候を早く見つけることができる
3. その兆候を早く見つけることで、もっと良いやり方に切り替えることを考えることができる
4. 無駄なことをやらなくても良くなる

ということが挙げられます。

### 分析計画例

<img src="https://github.com/ryonakimageserver/omorikaizuka/blob/master/%E3%83%96%E3%83%AD%E3%82%B0%E7%94%A8/20210309-analysisplan.png?raw=true">

### 因果推論における実行計画

|構成要素|説明|
|---|---|
|`Research Question`|the causal relationship of interestはなにか？|
|`Theory`|参考となる理論モデルはあるか？その理論モデルからどのような仮説が導き出されるか？|
|`Ideal Experiment`|the causal effect of interestを推定するにあたって理想的な実験はなにか？|
|`Data Set`|使われているデータセットは何か?<br><br>the causal relationship of interestを特定するのに役立つ特徴はなにか？<br><br>Dデータセットには欠点があるか？|
|`Descriptive Evidence`|対象となる変数の間に関係があることを示唆する記述的証拠（相関関係）は何か？|
|`identification strategy`|An identification strategyとは研究者が観察データ（すなわち、無作為化試験によって生成されていないデータ）を実際の実験に近づけるために使用する方法のことです<br><br>説明変数の内因性の問題は、論文の中では議論されているか？<br><br>regressorsのvariationはどのようにして発生しているのか？<br><br>推定式に含まれていない変数の影響はあるか？<br><br>missing variableによって発生するバイアスの方向性はどのようなものか？<br><br>他の潜在的なバイアスの原因は考えられるか？<br><br>偏りの原因ごとに、データ生成プロセス、推定式、推定量を書く<br><br>その推定量が偏っている理由を説明する|
|`Discussion`|さらにどのようなロバストネス・チェックを行うことができるか？|
|`Conclusion`|なぜあなたの結果重要なのか？どのようなpolicy implicationが考えられるか？|

## 6. 計画を実行する

1. 忍耐力をもって計画を実行する。失敗してもなぜ失敗したか検証することができる
2. 闇雲に計画を実行するのではなく、形式的論理的に実行計画に矛盾がないか常に確認する
3. 実行計画が複雑な場合は、その計画を大きな段階にわけ、それぞれの段階が矛盾がないか確認する。その後、大きな各段階を更に細かい段階に分け、そこでも矛盾がないか検証する。

## 7. 振り返る

問題を理解し、計画を立て、各段階を検討した上で、計画を実行したとする。しかし、どんなに慎重にそれぞれのステップをこなしたとしても間違いを完全に防ぐことはできません。そのため、どんなときにも計画を実行して得られた結果を検証・振り返ることは必要です。振り返りというプロセスで重要な指針は以下となります：

- 結果や議論を手っ取り早く素早く直感的に試すことができるか？
- 直感的に理解できるか？
- 同じ結果を違った仕方で導くことはできるか？
- 他の事柄との関連で理解できるか？
- 得られた結果を別の事柄に応用できるか？


## 8. 問題解決の例
### 速度の問題

> 問題文

水が直角円錐形の容器に速度$$r$$で注がれている。容器の底は水平であり、頂点が下を向いているとする。底の半径を$$a$$, 円錐の高さを$$b$$とする。水の深さが$$\gamma$$であるときに水面が上昇する速さを求めよ。

> 解答方針

||検討項目|説明|
|---|---|---|
|(1)|求めるものは何か？|水面が上昇する速さ。速さとは水の深さが上昇する速度のこと。つまり$$\gamma$$の変化の速度のこと|
|(2)|変化の速度とは何か？|時間を$$t$$とおいたとき、$$d\gamma/dt$$と表される。|
|(3)|与えられたデータうち速度を表すものはあるか？|$$r$$は水の体積の変化の速度を表しています。|
|(4)|$$r$$は水の体積の変化の速度を表しているとは？|容器の体積を$V$とするならば、$$dV/dt = r$$|

以上のことを踏まえると、まず水の高さ$$\gamma$$のときの体積の変化率は以下のように表せます：

$$
\frac{dV(\gamma)}{dt} = \frac{dV(\gamma)}{d\gamma}\frac{\gamma(t)}{dt} = \frac{\pi a^2\gamma^2}{b^2}\frac{\gamma(t)}{dt} = r
$$

よって、

$$
\frac{\gamma(t)}{dt} = \frac{rb^2}{\pi a^2\gamma^2}
$$

この結果は、高さが高いほど変化の速度が小さくなっていることを示しており、直感的にも理解することができます。


<div style="text-align: right;">
■
</div>


### 必要十分条件の見極め

> 問題文

$$a$$は実数の定数とする． 

$$
a_1 = a, a_n = 3^n - 5a_{n-1} (n\geq 2)
$$ 

で定まる数列$$\{a_n\}$$について，次の問いに答えよ． 

1. 一般項$$a_n$$を$$a$$と$$n$$の式で表せ．
2. 任意の自然数$$n$$に対し，$$a_{n+1}>a_n$$が成り立つときの$$a$$の値を求めよ． 

> 解答(1)

与えられた式を次のように変換します：

$$
\begin{aligned}
a_n &= 3^n - 5a_{n-1}\\
&= 3^n + -5\cdot a_{n-1}
\end{aligned}
$$

両辺に$$(-5)^n$$を掛けて

$$
\frac{a_n}{(-5)^n} = \left(-\frac{3}{5}\right)^n + \frac{a_{n-1}}{(-5)^{n-1}}
$$

ここで、

$$b_n\equiv \frac{a_n}{(-5)^n}$$

と定義します。

$$
\begin{aligned}
b_n &= b_1 + \sum{i=2}^n\left(-\frac{3}{5}\right)^i\\
&= b_1 + \left(\frac{3}{5}\right)^2 \sum{i=0}^{n-2}\left(-\frac{3}{5}\right)^i\\ 
&= b_1 + \frac{9}{25}\frac{1 - \left(- \frac{3}{5}\right)^{n-1}}{1 + \frac{3}{5}}\\
& = b_1 + \frac{9}{40}\left\{1 - \left(- \frac{3}{5}\right)^{n-1} \right\}
\end{aligned}
$$

$$
\therefore a_n = (-5)^{n-1}\left(a - \frac{9}{8}\right) + \frac{3^{n+1}}{8}
$$


<div style="text-align: right;">
■
</div>


> 解答(2)

解答(1)より

$$
\begin{aligned}
a_{n+1} - a_n &= (-5)\left(a - \frac{9}{8}\right)(-5)^{n-1} + \frac{3^{n+2}}{8} + \left(a - \frac{9}{8}\right)(-5)^{n-1} - \frac{3^{n+1}}{8}\\
&= \frac{3^{n+1}}{4} -6\left(a - \frac{9}{8}\right)(-5)^{n-1}
\end{aligned}
$$

これより、

$$
a - \frac{9}{8} = 0
$$

ならば、すべての自然数$$n$$で$$a_{n+1} - a_n > 0$$が成立する。よって、$$a = \frac{9}{8}$$は十分条件である。

次に、$$a = \frac{9}{8}$$が必要条件でもあることを示す。

$$
\frac{3^{n+1}}{4} -6\left(a - \frac{9}{8}\right)(-5)^{n-1}
$$

を$$n = 2k, sk+1$$に応じて、$$(-5)^{n}$$で割ると

$$
\begin{aligned}
-\frac{5}{8}\left(\frac{3}{5}\right)^{2k} &< a - \frac{9}{8}\\
\frac{5}{8}\left(\frac{3}{5}\right)^{2k+1} &> a - \frac{9}{8}\\
\Rightarrow &-\frac{5}{8}\left(\frac{3}{5}\right)^{2k} < a - \frac{9}{8} < \frac{5}{8}\left(\frac{3}{5}\right)^{2k+1}
\end{aligned}
$$

を得ます。これがすべての自然数$$k$$で成立するので

$$
\left|a - \frac{9}{8}\right| < \frac{5}{8}\left(\frac{3}{5}\right)^{2k}
$$

$$k$$を十分大きくすると、右辺はいくらでも小さくなるので

$$
\left|a - \frac{9}{8}\right| = 0
$$

よって、$$a = \frac{9}{8}$$は必要条件でもあります。


<div style="text-align: right;">
■
</div>

### 等しいものを文字に置く

二つ以上の等号でむすばれた条件などは， その等しいものを別の文字で表すことによって， 論証が簡明になることが多いです。

> 問題

相異なる3数 $$a, b, c$$ が 

$$
\frac{a^3+2a}{a+1} = \frac{b^3+2b}{b+1} = \frac{c^3+2c}{c+1}
$$

を満たすとき，$$a + b + c$$ 及び $$abc + ab + bc + ca$$の値を求めよ． 

> 解答

$$
\frac{a^3+2a}{a+1} = \frac{b^3+2b}{b+1} = \frac{c^3+2c}{c+1} = k
$$

と置きます。すると、

$$
\begin{cases}
a^3 + 2a &= k(a+1)\\
b^3 + 2b &= k(b+1)\\
c^3 + 2c &= k(c+1)
\end{cases}
$$

よって三変数a, b, cは３次方程式

$$
x^3 + (2 - k)x - k = 0
$$

の3解とわかります。 3次方程式の解と係数の関係から、

$$
\begin{aligned}
& a + b + c = 0\\
& ab + bc + ca = 2 - k\\
& abc = k
\end{aligned}
$$

$$
\therefore a + b + c = 0 \:\text{ and }\: abc + ab + bc + ca
$$


<div style="text-align: right;">
■
</div>




### どの化粧品を買っていいかわからない

「どの化粧品が良いのかわからない」という悩みを持っている人は多いと思います。「どの化粧品が良いのかわからない」という課題に直面しているのは理解できますが、これは本質的なものではありません。化粧品は美しくなるために使用するもので、化粧品を用いて解決したい課題はなにかをまず考える必要があります。考える順番としては、

1. 今悩んでいる症状はなにか？
2. その症状はなぜ発生するのか
3. 課題解決方針はなにか？
4. 課題解決方針に適した化粧品はなにか？

この順番はイプサでカウンセリングを受けたときも同様の流れでした。今回は仮にシミを解消したい場合を考えます。

> シミのメカニズム

シミは肌に黒メラニンが過剰に蓄積し、肌が部分的に茶色に見える状態です。メラニンの発生と蓄積の２つを理解する必要があります。

**(1) メラニンの発生と紫外線**

メラノサイトという細胞がメラニンを生成します。なぜメラニンを作るかというと、紫外線が原因となって肌が傷つけられたとき肌を守るためメラニンという色素が作られます。このメラニンは日傘の役割をします。この日傘を角化細胞（ケラチノサイト）に渡して紫外線から肌を守っています。

**(2) メラニンの過剰蓄積**

シミはメラニンが肌に過剰に蓄積されることで発生する症状です。過剰に蓄積される原因として、(1) メラニンが過剰に生産され過剰にケラチノサイトに渡される、(2) メラニンの排出が滞るの２つが考えられます。(1)の過剰に生産されることに関しても、肌センサーがバグって生成の必要がないタイミングでメラノサイトにメラニン生成信号を渡す場合やメラノサイトが過剰にセンサーに反応してしまうという２つのケースが考えられます。

> 課題解決方針と美容成分

以上のシミ発生メカニズムを踏まえるとシミの解決方針は以下となります：

|方針|具体アクション|
|---|---|
|紫外線から肌を守る|日焼け止め|
|間違ったメラニン生成命令をストップする|カモミラET<br>トラネキサム算<br>トラネキサム算セチル塩酸塩|
|過剰なメラニンの産生を抑制する|ビタミンC誘導体<br>コウジ酸<br>アルプチン<br>エラグ酸<br>4-n-ブチルレゾルシン<br>リノール酸S<br>4-メトキシサリチル酸カリウム塩など|
|メラニンの受け渡しをブロックする|ニコチン酸アミド|
|滞ったメラニン排出促進|アデノシン一リン酸二ナトリウムOT<br>デクスパンテノールW|

これでカタログに記載されてある成分がお肌環境をどう変えるかを理解することがちょっとできるようになります = 自分が欲しい商品が見つかる。
